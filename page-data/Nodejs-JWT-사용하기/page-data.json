{"componentChunkName":"component---src-components-post-post-page-tsx","path":"/Nodejs-JWT-ì‚¬ìš©í•˜ê¸°/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"1-ì„œë¡ \" style=\"position:relative;\"><a href=\"#1-%EC%84%9C%EB%A1%A0\" aria-label=\"1 ì„œë¡  permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ì„œë¡ </h1>\n<p>ì§€ë‚œ í¬ìŠ¤íŒ…ì—ì„œëŠ” JWT ê¸°ë°˜ ì¸ì¦ ë°©ì‹ì— ëŒ€í•´ ì•Œì•„ë´¤ë‹¤. ì´ë²ˆì—” Node.jsë¡œ JWTë¥¼ ì§ì ‘ êµ¬í˜„í•´ë³´ë„ë¡ í•˜ì. êµ¬í˜„ ë°©ë²•ì€ ì–´ë µì§€ ì•Šìœ¼ë‚˜ ì´ í¬ìŠ¤íŒ…ì—ì„œëŠ” jsonwebtokenì„ ì‚¬ìš©í•œ í† í°ì˜ ë°œê¸‰ê³¼ ë§Œë£Œ ê¸°ê°„ ì„¤ì • ë“± ê¸°ë³¸ ê°œë…ì— ëŒ€í•œ êµ¬í˜„ë§Œ í•˜ë„ë¡ í•˜ê² ë‹¤. ìš´ì˜í•˜ë ¤ëŠ” ì„œë¹„ìŠ¤ë§ˆë‹¤ JWTë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‚˜ ë©”ëª¨ë¦¬ ì ì¬ ì—¬ë¶€ ë“±ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ìœ„ì˜ ì¸ì¦ ë°©ì‹ ì •ë¦¬í•˜ê¸°ì—ì„œ JWT ê¸°ë°˜ ì¸ì¦ ë°©ì‹ì˜ ì´ë¡ ì  ê°œë…ì„ ë³´ê³  í•„ìš”í•œ ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì—¬ êµ¬í˜„í•´ë³´ê¸¸ ë°”ë€ë‹¤.</p>\n<h1 id=\"2-í™˜ê²½-ì„¤ì •\" style=\"position:relative;\"><a href=\"#2-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95\" aria-label=\"2 í™˜ê²½ ì„¤ì • permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. í™˜ê²½ ì„¤ì •</h1>\n<p>ìš°ì„ , ì‹¤ìŠµì„ ì§„í–‰í•  í´ë”ë¥¼ ìƒì„±í•˜ê³  í•„ìš”í•œ ëª¨ë“ˆë“¤ì„ ëª¨ë‘ ì„¤ì¹˜í•˜ë„ë¡ í•˜ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># í´ë” ìƒì„± ë° ì—´ê¸°</span>\n<span class=\"token function\">mkdir</span> jwt-practice\n<span class=\"token builtin class-name\">cd</span> jwt-practice\n\n<span class=\"token comment\"># package.json ìƒì„±</span>\n<span class=\"token function\">npm</span> init -y\n\n<span class=\"token comment\"># í•„ìš”í•œ ëª¨ë“ˆ ì„¤ì¹˜</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> http express body-parser jsonwebtoken dotenv</code></pre></div>\n<h1 id=\"3-í´ë”-êµ¬ì¡°\" style=\"position:relative;\"><a href=\"#3-%ED%8F%B4%EB%8D%94-%EA%B5%AC%EC%A1%B0\" aria-label=\"3 í´ë” êµ¬ì¡° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. í´ë” êµ¬ì¡°</h1>\n<p>í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ access tokenê³¼ refresh tokenì˜ secret keyë¥¼ ì €ì¥í•  í™˜ê²½ ë³€ìˆ˜ íŒŒì¼(.env)ê³¼ ì‹¤ì œ êµ¬í˜„í•  jwt.js íŒŒì¼ë¡œ êµ¬ì„±ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ğŸ“¦jwt-practice\n â”£ ğŸ“‚node_modules\n â”£ ğŸ“œ.env\n â”£ ğŸ“œjwt.js\n â”£ ğŸ“œpackage-lock.json\n â”— ğŸ“œpackage.json</code></pre></div>\n<h1 id=\"4-env\" style=\"position:relative;\"><a href=\"#4-env\" aria-label=\"4 env permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. .env</h1>\n<p>í™˜ê²½ ë³€ìˆ˜ë¥¼ ì €ì¥í•  íŒŒì¼ë¡œì¨ access tokenê³¼ refresh tokenì˜ secret keyë¥¼ ì €ì¥í•  íŒŒì¼ì´ë‹¤. ì¼ë°˜ì ìœ¼ë¡œ secret keyëŠ” ì ˆëŒ€ë¡œ ì™¸ë¶€ë¡œ ìœ ì¶œë˜ì„œëŠ” ì•ˆ ë˜ë¯€ë¡œ ë³´ì•ˆì„ ì² ì €íˆ í•´ì•¼ í•œë‹¤. ì•„ë˜ì˜ secret keyëŠ” ìƒ˜í”Œë¡œ ë§Œë“  ëœë¤ í•œ í‚¤ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"env\"><pre class=\"language-env\"><code class=\"language-env\">ACCESS_TOKEN_SECRET=d7d34917fbd11fdd89357decfb506b5e563e418bf7b136d30436dfa0dddbd4a6e318099c8e4918b87fd8e47e23196c441a5c892a6895d6061e27f89ed1ba19d6\nREFRESH_TOKEN_SECRET=3a13ce20d9e44269e1a01f31e6cb67b6f200450ecc7cf09c3d0a199e512037422145d7727fa874e128bfbbc198b06e99ae1f6e24b57e8cd598102b61bffa8e69</code></pre></div>\n<h1 id=\"5-jwtjs\" style=\"position:relative;\"><a href=\"#5-jwtjs\" aria-label=\"5 jwtjs permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. jwt.js</h1>\n<p>ì•„ë˜ì˜ ì½”ë“œëŠ” ì„ì˜ë¡œ ë§Œë“  usersë¼ëŠ” id, pw ë°°ì—´ì„ ì§€ì •í•˜ê³ (ì‹¤ì œë¡œëŠ” pwëŠ” ë°˜ë“œì‹œ ì•”í˜¸í™”í•˜ì—¬ DBì— ì €ì¥í•´ì•¼ í•œë‹¤.), ë¡œê·¸ì¸ ì‹œ í•´ë‹¹ id, pwì™€ ì¼ì¹˜í•˜ëŠ” ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ access tokenê³¼ refresh tokenì„ ë°œê¸‰í•˜ëŠ” ì½”ë“œì´ë‹¤. ì´ë ‡ê²Œ ë°œê¸‰ëœ tokenì€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ headersì— authorization: 'bearer ' + accessToken ë°©ì‹ìœ¼ë¡œ ë„˜ê²¨ë°›ì•„ í•´ë‹¹ ìš”ì²­ì˜ tokenì´ ìœ íš¨í•œ ì§€ ê²€ì‚¬í•œë‹¤. ìì„¸í•œ ì„¤ëª…ì€ ì•„ë˜ì—ì„œ ì˜ˆì‹œë¥¼ ë³´ë©° ì„¤ëª…í•˜ë„ë¡ í•˜ê² ë‹¤.\nì´ ì˜ˆì œì—ì„œëŠ” /user ìš”ì²­ì—ì„œ tokenì´ ìœ íš¨í•  ì‹œ idì™€ pwë¥¼ ë„˜ê²¨ì£¼ëŠ” ì‘ë‹µì„ ë³´ëƒˆëŠ” ë° ì‹¤ì œë¡œëŠ” pwë¥¼ ë„˜ê²¨ì£¼ëŠ” ì¼ì€ ê²°ì½” ì—†ìœ¼ë‹ˆ ìœ ì˜í•˜ê¸° ë°”ë€ë‹¤. ê·¸ì € ì˜ˆì‹œì¼ ë¿ì´ë€ ê±¸ ì´í•´í•˜ê³  ë„˜ì–´ê°€ê¸¸ ë°”ë€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// jwt.js</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> jwt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jsonwebtoken\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> bodyParser <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"body-parser\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> request <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"../session-practice/db\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> <span class=\"token number\">8080</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>bodyParser<span class=\"token punctuation\">.</span><span class=\"token function\">urlencoded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> extended<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>bodyParser<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ì„ì‹œ id, pw ë°°ì—´</span>\n<span class=\"token keyword\">const</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> pw<span class=\"token operator\">:</span> <span class=\"token string\">\"world\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">\"good\"</span><span class=\"token punctuation\">,</span> pw<span class=\"token operator\">:</span> <span class=\"token string\">\"bye\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ë¡œê·¸ì¸ id, pw í™•ì¸</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">login</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> pw</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> len <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>id <span class=\"token operator\">===</span> users<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">&amp;&amp;</span> pw <span class=\"token operator\">===</span> users<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>pw<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// access tokenì„ secret key ê¸°ë°˜ìœ¼ë¡œ ìƒì„±</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateAccessToken</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> jwt<span class=\"token punctuation\">.</span><span class=\"token function\">sign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ACCESS_TOKEN_SECRET</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        expiresIn<span class=\"token operator\">:</span> <span class=\"token string\">\"15m\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// refersh tokenì„ secret key  ê¸°ë°˜ìœ¼ë¡œ ìƒì„±</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateRefreshToken</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> jwt<span class=\"token punctuation\">.</span><span class=\"token function\">sign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">REFRESH_TOKEN_SECRET</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        expiresIn<span class=\"token operator\">:</span> <span class=\"token string\">\"180 days\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// login ìš”ì²­ ë° ì„±ê³µì‹œ access token, refresh token ë°œê¸‰</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> id <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> pw <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>pw<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> user <span class=\"token operator\">=</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> pw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user <span class=\"token operator\">===</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> accessToken <span class=\"token operator\">=</span> <span class=\"token function\">generateAccessToken</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> refreshToken <span class=\"token operator\">=</span> <span class=\"token function\">generateRefreshToken</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> accessToken<span class=\"token punctuation\">,</span> refreshToken <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// access tokenì˜ ìœ íš¨ì„± ê²€ì‚¬</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">authenticateAccessToken</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> authHeader <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span><span class=\"token string\">\"authorization\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> token <span class=\"token operator\">=</span> authHeader <span class=\"token operator\">&amp;&amp;</span> authHeader<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>token<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"wrong token format or token is not sended\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    jwt<span class=\"token punctuation\">.</span><span class=\"token function\">verify</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ACCESS_TOKEN_SECRET</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">403</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        req<span class=\"token punctuation\">.</span>user <span class=\"token operator\">=</span> user<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// access tokenì„ refresh token ê¸°ë°˜ìœ¼ë¡œ ì¬ë°œê¸‰</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/refresh\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> refreshToken <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>refreshToken<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>refreshToken<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">401</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    jwt<span class=\"token punctuation\">.</span><span class=\"token function\">verify</span><span class=\"token punctuation\">(</span>\n        refreshToken<span class=\"token punctuation\">,</span>\n        process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">REFRESH_TOKEN_SECRET</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">403</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">const</span> accessToken <span class=\"token operator\">=</span> <span class=\"token function\">generateAccessToken</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> accessToken <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// access token ìœ íš¨ì„± í™•ì¸ì„ ìœ„í•œ ì˜ˆì‹œ ìš”ì²­</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">,</span> authenticateAccessToken<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Server running on </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">PORT</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1 id=\"6-ì‹¤í–‰-ì˜ˆì‹œ\" style=\"position:relative;\"><a href=\"#6-%EC%8B%A4%ED%96%89-%EC%98%88%EC%8B%9C\" aria-label=\"6 ì‹¤í–‰ ì˜ˆì‹œ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. ì‹¤í–‰ ì˜ˆì‹œ</h1>\n<p>ì´ í¬ìŠ¤íŒ…ì—ì„œëŠ” ê²€ì‚¬ ë°©ì‹ìœ¼ë¡œ postmanì„ ì‚¬ìš©í–ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì¡´ì¬í•˜ëŠ” id, pwë¥¼ ì…ë ¥í•˜ë©´ access tokenê³¼ refresh tokenì„ ë°œê¸‰ë°›ê²Œ ëœë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/30a2b52e711bfd1e844aae63ce7ddbfe/8b70b/jwt1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.78625954198472%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACl0lEQVR42q1UTW/TQBD1P+QPAOKCkktpmjYSoqJFXDhzpb+AMweQAm2aDydVoRw4II5cStXGH7u2Y292vY+ZtV1CCRUHRnrazczsy8zsW3unowFGEx/TkxP4sxntJ9eYTKfON/Z9tw7HY4djwqcZxSdjjPwpxh/PcHr2Ga8ODuC93uvi8WYHe1sd7G4+wk67RWijR3ja6eDZzjaebGxgv9t1vh7Fu60WXm638XxrE7sPH2D/7h286HXRvn8PXhYLlFLACFqTBEgEbHgJE8xRBlfQUQAVRSiCAKWIKVfCpgmKKEZyNYc5/w58nQKZwPG7t/BUKqC0hrEWuiyhlkvEIkKSpiiUQq4K5OQrCJzHWBrjUFDsIjX4cmWhAPTf9+HliwVUUWBJBzQfzHOEYYQ4jmkNEVBlIgwgqTpBXUiqUNIqhIQpMnz4tkDvjcSlNDg+JMKCyBJqlRN5X1KVTL4gYlXkyGld0BgyapP3nNPkaW2oLksowTY6OoRnbQkRR46QLcsyRDQzNj5kaRRlaYmscPsGHLsugMbANhwcMaGF4Rka45yclNL82FYPc9U3CTWd472uCSckPw8rxsHV/SrW+Ro0xYxJn95q4m2HqrjFOmsIJ/QY1hL+zTjUtFvaBr9a9n3/T0KVLxCTqCXdfJJKpIl0stIqp1uqKjFOiyQzoyto5fxHrMObhPzvGWkzIa2FocA8ShyCSCLLFQmcBL3UJGpdr8b52QaDwe+EFWpSEu48kLgIM/wIUpzPE0RJDpkWEIQ4zWnN3T4QlSqGw+H6GVb6W/HfciFVV6YmHFU6XHujNew/QNe3PKNPoIf/YGXdnU/fRo+fWgNFXxd+EQ341fD7bcC/OY8VkPMZUkAQhJBR6Lrp9/v4Cez0TVa3VzT4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jwt1\"\n        title=\"jwt1\"\n        src=\"/static/30a2b52e711bfd1e844aae63ce7ddbfe/1c1a4/jwt1.png\"\n        srcset=\"/static/30a2b52e711bfd1e844aae63ce7ddbfe/8ff13/jwt1.png 262w,\n/static/30a2b52e711bfd1e844aae63ce7ddbfe/3e286/jwt1.png 523w,\n/static/30a2b52e711bfd1e844aae63ce7ddbfe/1c1a4/jwt1.png 1046w,\n/static/30a2b52e711bfd1e844aae63ce7ddbfe/8b70b/jwt1.png 1266w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>ë°œê¸‰ë°›ì€ access tokenì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ headersì— authorization: 'bearer ' + access tokenë¥¼ ì²¨ë¶€í•œë‹¤. ë§Œì•½ tokenì´ ìœ íš¨í•˜ë‹¤ë©´ ìœ„ì—ì„œ ì„¤ëª…í•œ ëŒ€ë¡œ id, pwë¥¼ ë°œê¸‰ë°›ê²Œ ëœë‹¤. (ì˜ˆì‹œì¼ ë¿ ì‹¤ì œë¡œ pwë¥¼ ì£¼ëŠ” ê²½ìš°ëŠ” ê²°ì½” ì—†ë‹¤.)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7668ad132d1220b55b6c38b98e0c841b/8b70b/jwt2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.78625954198472%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVR42q1UyW4TQRCdP+QHAHFBdg7BjhcJEZEgLpy5ki/gjgSSiWxnxmNHgSBxQRy5AImX2Zee7p5HVccDxplEHCjpqXqp5XV1dVtn9gj2xMX09BTubEbjyW9MpjOz5riu0SeOYzAmfJzR/sSB7U7hfDjH2fknvDo6gvX6oIPHrTYO9trYbz1Cr9lAr9FAv9nE03Ybz3pdPNndxWG3g/7ODq030KH9l90mnu+1sP/wAQ7v3sGLfgfN+/dgJX4AHQZQAekoAqIQOlih8H1IglrNIReXKOYXgLcg2xBlHCH3fETzBdT3b8CXKZAEGL97C0vEAYSUUGUJqTXyooAX+AjjGJkQZp4XAoK0JDu2LZQyyEWOn7HC58sSAsDg/QBWlqYQeY6CHBg5jX3Pg0/slvM5Fhc/EBD7kJht6oC0zGMcf03RfxPiMlQYH1NADhDRUdmQx4oyZ1mGlCCJgcxiaCVNMmao6RRsU2mgBDTzA+zREFZZagS+ZwKycFCPGLJziSvRukRKJ+G9TXBipTQEaRPwZMwBSyiuoclG+XhOY9ZX0EYzozrwnlz7TqjVLGwJG9SNb5OKjEP9aVWOlfMfZteBGxKobYbbAW+SsrKlmuqNRFxvFpde1LWAIkvhLxemLQJqeG4RcyG0rrm2ZMM3LiS12RqiyE26IffhdkBFhY6TFGmSGM23KajBC0JJe3Wi1+vD0aj+yJJaQTGLQqHu0rZR1dC27fqAph1Qf0l1a38FvO1W/xVVwBl9gRb+g+g1c5f+Riuh4lcwxV9/EtVHwc+rAs/ZLqS3n7EPfXXL5QqhtzI9OhgM8At5cU/9GtsGnwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jwt2\"\n        title=\"jwt2\"\n        src=\"/static/7668ad132d1220b55b6c38b98e0c841b/1c1a4/jwt2.png\"\n        srcset=\"/static/7668ad132d1220b55b6c38b98e0c841b/8ff13/jwt2.png 262w,\n/static/7668ad132d1220b55b6c38b98e0c841b/3e286/jwt2.png 523w,\n/static/7668ad132d1220b55b6c38b98e0c841b/1c1a4/jwt2.png 1046w,\n/static/7668ad132d1220b55b6c38b98e0c841b/8b70b/jwt2.png 1266w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>ë§Œì•½ ë§Œë£Œ ê¸°ê°„ì´ ì§€ë‚œ ê²½ìš°ëŠ” ì•„ë˜ì™€ ê°™ì´ ì ‘ê·¼ ê¸ˆì§€ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. ì´ëŸ° ê²½ìš° access tokenì„ refresh í•´ì•¼ í•˜ëŠ” ë° ì´ë•Œ ì‚¬ìš©í•˜ëŠ” í† í°ì´ ë°”ë¡œ refresh tokenì´ë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d3769d3a46f8778e319e1ef0a5c3c24/8b70b/jwt3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.78625954198472%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACP0lEQVR42p1UyW4TQRCdP+QHiMQF2TkEb7GE2Iy4cOZEfiF3pEhxrHiZsS0FiMQFceQCJB579rWXR3V7JlheiJWSnmqmuvpVTb/qMa5GfQxMC+PpFOZkgqFp3sGidx0fj7Uv4wPCl6kFyzIxGk9gfv6Kq+trfDw5gXH6ponntTo6jQZe1Z7huFohVNEmvK7X8fa4hRdHR+i0mmgfHlK8gmalgg+tKt41anj59Ak6jx/hfbuJysEBjMj1IHwP3CMfBEDgQ3gL5K4LRuCLGZh9i3x2Azg25fqQYYDUcRHMbPBfP4HvEyDy0T87g5GFHjLGwITQSPMcjufCD0MkWabf0zxDRp5RnsrNOddIsxR/Qo5vtxIZgPPuOYw4CpFTsqAEQYRJksB1HLjU3Xw2g33zGx5171Nnq94jz9IQvR8x2p983Pocgx4RciLJi+rKOBEr0pjAqAOWhFSM3eWoorworjwgAZHpvaP+JQysWZqmcKhDtVkWMSEk4jjWa6tQhTkXyMhrwuFwSSil1FhuXlYuY1IK7VV8G9Qa050S4Wi0SVj69ef/Gb+PcBewowDft8N1Uyuy+EyxUqgU1KQbtEGYJTHcuQ1Xj4anR0QdfkqiyOJ81UwmLEXOcppLAk2DKnfZu9guSkhDHdCtydRgk5qKIKdnJdA2E3wZ7w8G/wjV+cg9hNh2tg8WZVdOSajP8D6CfcALUSzL2rwpDzFRdK47LAVQUGquYv2aKR9FEf0gAqifSkhTYM/n8J2F1qDbvcBfnkNQZX/EV7YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jwt3\"\n        title=\"jwt3\"\n        src=\"/static/0d3769d3a46f8778e319e1ef0a5c3c24/1c1a4/jwt3.png\"\n        srcset=\"/static/0d3769d3a46f8778e319e1ef0a5c3c24/8ff13/jwt3.png 262w,\n/static/0d3769d3a46f8778e319e1ef0a5c3c24/3e286/jwt3.png 523w,\n/static/0d3769d3a46f8778e319e1ef0a5c3c24/1c1a4/jwt3.png 1046w,\n/static/0d3769d3a46f8778e319e1ef0a5c3c24/8b70b/jwt3.png 1266w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>access tokenì„ ì¬ë°œê¸‰ë°›ì„ ë•ŒëŠ” refresh tokenì„ ì„œë²„ë¡œ ë³´ë‚´ì•¼ í•œë‹¤.(refresh tokenì„ ê¸°ë°˜ìœ¼ë¡œ access tokenì„ ë°œê¸‰ë°›ê¸° ë•Œë¬¸ì—) ë§Œì•½ refresh token ë˜í•œ ë§Œë£Œëœ ê²½ìš°ëŠ” ì²˜ìŒ ì§€ì •í•œ ìë™ ë¡œê·¸ì¸ ê¸°ê°„ì´ ì¢…ë£Œëœ ê²ƒì´ë¯€ë¡œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ redirect ì‹œí‚¤ë©´ ëœë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0097b46c35de2af25d4c6a8dce068a31/8b70b/jwt4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.78625954198472%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACd0lEQVR42q2Uz27UMBDG84a8AIcKCe1WonS7bSVERYs48ADc6Bv0zKVStyzdJN1WhXLggLhxQkA3/5w4sWM7H2NvstoW9oBgpJ88diafx5NxvCv/HSbhOaaXlwinU/hhuOD84mKxbv1JEDjOiA8XIcIwgE/PgvfXuLr+iNeHh/CO9od4sjnA/tYAe5uPsdPvYafXw26/j2eDAZ5vb+PpxgYOhkPsrq8TfQx7fbza7uPF1ib2Hq7h4P49vNwZ4tGDNXg8zWBYBp3RmOdAzmCyGCpNiRgysSTQ8Q2a+Ad0RGMSoYwT5Dcz6G9fgc9TgGc4Oz6GJ4sMUinopoEyBqKukaQJWFGgkhK8qlDSWGuFWkkI66vazYUU+F5ofLppIAGcjEbwqrKEFAI1CVkECSS0e0oZxnGMKJohjWdgWYosY3QARj5zvhIFTr+U2H3D8JMp+GMSFCSW01EZBVrfUJaSsqhIWIrKjWWegfOcfOFiujitNeXVEAbW/PEpvKYxyOwRSdCaDU6oZorK0FAZLIbgnDvxjm5TTcI1xVoLA98KNtC2hm43uJ2XxeYYt25Mu4ExC+xcdYLnU3i4YzZg2V+er7IumSAI54LLL97O7DZYIb4QDFcIrrK55tKR2/p2NfyjoKxKpNQqjL58XjAU1Oi2rZSsqMDzTGzNbS8q6kWHkm59fDr6XdDuzEuOnPosThiiJMeMiIlKSMhaO0Q7WnjVCo7HtwUdVrT98t2LQmq6NZqyMi3aobRxVKJ2gpOJv/qj/I2ZthS+3/bhv9L1oRPEfzDTnsj1ob1SHfY6dT+Ju3R32MbZDih5AU7XdRZFYPSLA92mk9Fb/AJgm06m9Br+hwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jwt4\"\n        title=\"jwt4\"\n        src=\"/static/0097b46c35de2af25d4c6a8dce068a31/1c1a4/jwt4.png\"\n        srcset=\"/static/0097b46c35de2af25d4c6a8dce068a31/8ff13/jwt4.png 262w,\n/static/0097b46c35de2af25d4c6a8dce068a31/3e286/jwt4.png 523w,\n/static/0097b46c35de2af25d4c6a8dce068a31/1c1a4/jwt4.png 1046w,\n/static/0097b46c35de2af25d4c6a8dce068a31/8b70b/jwt4.png 1266w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1 id=\"ì°¸ê³ \" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"ì°¸ê³  permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ì°¸ê³ ]</h1>\n<ul>\n<li><a href=\"https://www.npmjs.com/package/jsonwebtoken\">https://www.npmjs.com/package/jsonwebtoken</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=mbsmsi7l3r4\">https://www.youtube.com/watch?v=mbsmsi7l3r4</a></li>\n</ul>","id":"2c188402-4a62-5020-b1c5-8c79c7e7c818","tableOfContents":"<ul>\n<li><a href=\"#1-%EC%84%9C%EB%A1%A0\">1. ì„œë¡ </a></li>\n<li><a href=\"#2-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95\">2. í™˜ê²½ ì„¤ì •</a></li>\n<li><a href=\"#3-%ED%8F%B4%EB%8D%94-%EA%B5%AC%EC%A1%B0\">3. í´ë” êµ¬ì¡°</a></li>\n<li><a href=\"#4-env\">4. .env</a></li>\n<li><a href=\"#5-jwtjs\">5. jwt.js</a></li>\n<li><a href=\"#6-%EC%8B%A4%ED%96%89-%EC%98%88%EC%8B%9C\">6. ì‹¤í–‰ ì˜ˆì‹œ</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">ì°¸ê³ </a></li>\n</ul>","frontmatter":{"author":"millo","description":"nodejsì—ì„œ JWTë¥¼ ì‚¬ìš©í•œ ì¸ì¦ ë°©ì‹ì„ êµ¬í˜„í•´ë³´ì.","category":"nodejs","released_at":"2021-02-01 14:00","updated_at":null,"tags":["Authentication","nodejs","jsonwebtoken","JWT","JWT Auth"],"title":"[Node.js] JWT ì‚¬ìš©í•˜ê¸°","lang":"ko","series":"Authentication ë°©ì‹ ì •ë¦¬í•˜ê¸°","translation":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABwkAD/8QAGBAAAgMAAAAAAAAAAAAAAAAAAhIBICH/2gAIAQEAAQUCAWlcp//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAARASAx/9oACAEBAAY/AtG4r//EABgQAAIDAAAAAAAAAAAAAAAAABEhACDB/9oACAEBAAE/IUSIzBGv/9oADAMBAAIAAwAAABCAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQEAAwEAAAAAAAAAAAAAAAERACCRQf/aAAgBAQABPxCrJiF9mFWHpzX/2Q==","aspectRatio":1.6666666666666667,"src":"/static/f695947583c0c0242859d127bd9962e0/14b42/jwt.jpg","srcSet":"/static/f695947583c0c0242859d127bd9962e0/f836f/jwt.jpg 200w,\n/static/f695947583c0c0242859d127bd9962e0/2244e/jwt.jpg 400w,\n/static/f695947583c0c0242859d127bd9962e0/14b42/jwt.jpg 800w,\n/static/f695947583c0c0242859d127bd9962e0/a7715/jwt.jpg 1000w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"fields":{"slug":"/Nodejs-JWT-ì‚¬ìš©í•˜ê¸°/"}},"site":{"siteMetadata":{"siteUrl":"https://millo-L.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"Session ê¸°ë°˜ ì¸ì¦ ë°©ì‹","lang":"ko"},"fields":{"slug":"/Session-ê¸°ë°˜-ì¸ì¦ë°©ì‹/"}}},{"node":{"frontmatter":{"title":"JWT ê¸°ë°˜ ì¸ì¦ ë°©ì‹","lang":"ko"},"fields":{"slug":"/JWT-ê¸°ë°˜-ì¸ì¦ë°©ì‹/"}}},{"node":{"frontmatter":{"title":"[Node.js] express session ì‚¬ìš©í•˜ê¸°","lang":"ko"},"fields":{"slug":"/Nodejs-express-session-ì‚¬ìš©í•˜ê¸°/"}}},{"node":{"frontmatter":{"title":"[Node.js] JWT ì‚¬ìš©í•˜ê¸°","lang":"ko"},"fields":{"slug":"/Nodejs-JWT-ì‚¬ìš©í•˜ê¸°/"}}},{"node":{"frontmatter":{"title":"[Node.js] passport session ì‚¬ìš©í•˜ê¸°","lang":"ko"},"fields":{"slug":"/Nodejs-passport-session-ì‚¬ìš©í•˜ê¸°/"}}},{"node":{"frontmatter":{"title":"OAuth 2.0 ê¸°ë°˜ ì¸ì¦ ë°©ì‹","lang":"ko"},"fields":{"slug":"/OAuth2-ê¸°ë°˜-ì¸ì¦ë°©ì‹/"}}},{"node":{"frontmatter":{"title":"[Node.js] passport Google OAuth 2.0 ë¡œê·¸ì¸ ì‚¬ìš©í•˜ê¸°","lang":"ko"},"fields":{"slug":"/Nodejs-passport-Google-OAuth-2-ë¡œê·¸ì¸-ì‚¬ìš©í•˜ê¸°/"}}}]}},"pageContext":{"slug":"/Nodejs-JWT-ì‚¬ìš©í•˜ê¸°/","series":"Authentication ë°©ì‹ ì •ë¦¬í•˜ê¸°"}},"staticQueryHashes":["1942759570","3469517283","764694655"]}