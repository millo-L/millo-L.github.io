{"componentChunkName":"component---src-components-post-post-template-tsx","path":"/Nodejs-JWT-ì‚¬ìš©í•˜ê¸°/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"1-ì„œë¡ \" style=\"position:relative;\"><a href=\"#1-%EC%84%9C%EB%A1%A0\" aria-label=\"1 ì„œë¡  permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ì„œë¡ </h2>\n<p>ì§€ë‚œ í¬ìŠ¤íŒ…ì—ì„œëŠ” JWT ê¸°ë°˜ ì¸ì¦ ë°©ì‹ì— ëŒ€í•´ ì•Œì•„ë´¤ë‹¤. ì´ë²ˆì—” Node.jsë¡œ JWTë¥¼ ì§ì ‘ êµ¬í˜„í•´ë³´ë„ë¡ í•˜ì. êµ¬í˜„ ë°©ë²•ì€ ì–´ë µì§€ ì•Šìœ¼ë‚˜ ì´ í¬ìŠ¤íŒ…ì—ì„œëŠ” jsonwebtokenì„ ì‚¬ìš©í•œ í† í°ì˜ ë°œê¸‰ê³¼ ë§Œë£Œ ê¸°ê°„ ì„¤ì • ë“± ê¸°ë³¸ ê°œë…ì— ëŒ€í•œ êµ¬í˜„ë§Œ í•˜ë„ë¡ í•˜ê² ë‹¤. ìš´ì˜í•˜ë ¤ëŠ” ì„œë¹„ìŠ¤ë§ˆë‹¤ JWTë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‚˜ ë©”ëª¨ë¦¬ ì ì¬ ì—¬ë¶€ ë“±ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ìœ„ì˜ ì¸ì¦ ë°©ì‹ ì •ë¦¬í•˜ê¸°ì—ì„œ JWT ê¸°ë°˜ ì¸ì¦ ë°©ì‹ì˜ ì´ë¡ ì  ê°œë…ì„ ë³´ê³  í•„ìš”í•œ ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì—¬ êµ¬í˜„í•´ë³´ê¸¸ ë°”ë€ë‹¤.</p>\n<h2 id=\"2-í™˜ê²½-ì„¤ì •\" style=\"position:relative;\"><a href=\"#2-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95\" aria-label=\"2 í™˜ê²½ ì„¤ì • permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. í™˜ê²½ ì„¤ì •</h2>\n<p>ìš°ì„ , ì‹¤ìŠµì„ ì§„í–‰í•  í´ë”ë¥¼ ìƒì„±í•˜ê³  í•„ìš”í•œ ëª¨ë“ˆë“¤ì„ ëª¨ë‘ ì„¤ì¹˜í•˜ë„ë¡ í•˜ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">## í´ë” ìƒì„± ë° ì—´ê¸°</span>\r\n<span class=\"token function\">mkdir</span> jwt-practice\r\n<span class=\"token builtin class-name\">cd</span> jwt-practice\r\n\r\n<span class=\"token comment\">## package.json ìƒì„±</span>\r\n<span class=\"token function\">npm</span> init <span class=\"token parameter variable\">-y</span>\r\n\r\n<span class=\"token comment\">## í•„ìš”í•œ ëª¨ë“ˆ ì„¤ì¹˜</span>\r\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> http express body-parser jsonwebtoken dotenv</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"3-í´ë”-êµ¬ì¡°\" style=\"position:relative;\"><a href=\"#3-%ED%8F%B4%EB%8D%94-%EA%B5%AC%EC%A1%B0\" aria-label=\"3 í´ë” êµ¬ì¡° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. í´ë” êµ¬ì¡°</h2>\n<p>í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ access tokenê³¼ refresh tokenì˜ secret keyë¥¼ ì €ì¥í•  í™˜ê²½ ë³€ìˆ˜ íŒŒì¼(.env)ê³¼ ì‹¤ì œ êµ¬í˜„í•  jwt.js íŒŒì¼ë¡œ êµ¬ì„±ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">ğŸ“¦jwt-practice\r\n â”£ ğŸ“‚node_modules\r\n â”£ ğŸ“œ.env\r\n â”£ ğŸ“œjwt.js\r\n â”£ ğŸ“œpackage-lock.json\r\n â”— ğŸ“œpackage.json</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"4-env\" style=\"position:relative;\"><a href=\"#4-env\" aria-label=\"4 env permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. .env</h2>\n<p>í™˜ê²½ ë³€ìˆ˜ë¥¼ ì €ì¥í•  íŒŒì¼ë¡œì¨ access tokenê³¼ refresh tokenì˜ secret keyë¥¼ ì €ì¥í•  íŒŒì¼ì´ë‹¤. ì¼ë°˜ì ìœ¼ë¡œ secret keyëŠ” ì ˆëŒ€ë¡œ ì™¸ë¶€ë¡œ ìœ ì¶œë˜ì„œëŠ” ì•ˆ ë˜ë¯€ë¡œ ë³´ì•ˆì„ ì² ì €íˆ í•´ì•¼ í•œë‹¤. ì•„ë˜ì˜ secret keyëŠ” ìƒ˜í”Œë¡œ ë§Œë“  ëœë¤ í•œ í‚¤ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"env\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-env line-numbers\"><code class=\"language-env\">ACCESS_TOKEN_SECRET=d7d34917fbd11fdd89357decfb506b5e563e418bf7b136d30436dfa0dddbd4a6e318099c8e4918b87fd8e47e23196c441a5c892a6895d6061e27f89ed1ba19d6\r\nREFRESH_TOKEN_SECRET=3a13ce20d9e44269e1a01f31e6cb67b6f200450ecc7cf09c3d0a199e512037422145d7727fa874e128bfbbc198b06e99ae1f6e24b57e8cd598102b61bffa8e69</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h2 id=\"5-jwtjs\" style=\"position:relative;\"><a href=\"#5-jwtjs\" aria-label=\"5 jwtjs permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. jwt.js</h2>\n<p>ì•„ë˜ì˜ ì½”ë“œëŠ” ì„ì˜ë¡œ ë§Œë“  usersë¼ëŠ” id, pw ë°°ì—´ì„ ì§€ì •í•˜ê³ (ì‹¤ì œë¡œëŠ” pwëŠ” ë°˜ë“œì‹œ ì•”í˜¸í™”í•˜ì—¬ DBì— ì €ì¥í•´ì•¼ í•œë‹¤.), ë¡œê·¸ì¸ ì‹œ í•´ë‹¹ id, pwì™€ ì¼ì¹˜í•˜ëŠ” ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ access tokenê³¼ refresh tokenì„ ë°œê¸‰í•˜ëŠ” ì½”ë“œì´ë‹¤. ì´ë ‡ê²Œ ë°œê¸‰ëœ tokenì€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ headersì— authorization: 'bearer ' + accessToken ë°©ì‹ìœ¼ë¡œ ë„˜ê²¨ë°›ì•„ í•´ë‹¹ ìš”ì²­ì˜ tokenì´ ìœ íš¨í•œ ì§€ ê²€ì‚¬í•œë‹¤. ìì„¸í•œ ì„¤ëª…ì€ ì•„ë˜ì—ì„œ ì˜ˆì‹œë¥¼ ë³´ë©° ì„¤ëª…í•˜ë„ë¡ í•˜ê² ë‹¤.\r\nì´ ì˜ˆì œì—ì„œëŠ” /user ìš”ì²­ì—ì„œ tokenì´ ìœ íš¨í•  ì‹œ idì™€ pwë¥¼ ë„˜ê²¨ì£¼ëŠ” ì‘ë‹µì„ ë³´ëƒˆëŠ” ë° ì‹¤ì œë¡œëŠ” pwë¥¼ ë„˜ê²¨ì£¼ëŠ” ì¼ì€ ê²°ì½” ì—†ìœ¼ë‹ˆ ìœ ì˜í•˜ê¸° ë°”ë€ë‹¤. ê·¸ì € ì˜ˆì‹œì¼ ë¿ì´ë€ ê±¸ ì´í•´í•˜ê³  ë„˜ì–´ê°€ê¸¸ ë°”ë€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// jwt.js</span>\r\n\r\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> jwt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jsonwebtoken\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> bodyParser <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"body-parser\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> request <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"../session-practice/db\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> <span class=\"token number\">8080</span><span class=\"token punctuation\">;</span>\r\n\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>bodyParser<span class=\"token punctuation\">.</span><span class=\"token function\">urlencoded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">extended</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>bodyParser<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// ì„ì‹œ id, pw ë°°ì—´</span>\r\n<span class=\"token keyword\">const</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">pw</span><span class=\"token operator\">:</span> <span class=\"token string\">\"world\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"good\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">pw</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bye\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// ë¡œê·¸ì¸ id, pw í™•ì¸</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">login</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> pw</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> len <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>id <span class=\"token operator\">===</span> users<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">&amp;&amp;</span> pw <span class=\"token operator\">===</span> users<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>pw<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// access tokenì„ secret key ê¸°ë°˜ìœ¼ë¡œ ìƒì„±</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateAccessToken</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> jwt<span class=\"token punctuation\">.</span><span class=\"token function\">sign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ACCESS_TOKEN_SECRET</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">expiresIn</span><span class=\"token operator\">:</span> <span class=\"token string\">\"15m\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// refersh tokenì„ secret key  ê¸°ë°˜ìœ¼ë¡œ ìƒì„±</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateRefreshToken</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> jwt<span class=\"token punctuation\">.</span><span class=\"token function\">sign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">REFRESH_TOKEN_SECRET</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">expiresIn</span><span class=\"token operator\">:</span> <span class=\"token string\">\"180 days\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// login ìš”ì²­ ë° ì„±ê³µì‹œ access token, refresh token ë°œê¸‰</span>\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> id <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">let</span> pw <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>pw<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">let</span> user <span class=\"token operator\">=</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> pw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user <span class=\"token operator\">===</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">let</span> accessToken <span class=\"token operator\">=</span> <span class=\"token function\">generateAccessToken</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">let</span> refreshToken <span class=\"token operator\">=</span> <span class=\"token function\">generateRefreshToken</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> accessToken<span class=\"token punctuation\">,</span> refreshToken <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// access tokenì˜ ìœ íš¨ì„± ê²€ì‚¬</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">authenticateAccessToken</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> authHeader <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span><span class=\"token string\">\"authorization\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">let</span> token <span class=\"token operator\">=</span> authHeader <span class=\"token operator\">&amp;&amp;</span> authHeader<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>token<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"wrong token format or token is not sended\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    jwt<span class=\"token punctuation\">.</span><span class=\"token function\">verify</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ACCESS_TOKEN_SECRET</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">403</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        req<span class=\"token punctuation\">.</span>user <span class=\"token operator\">=</span> user<span class=\"token punctuation\">;</span>\r\n        <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// access tokenì„ refresh token ê¸°ë°˜ìœ¼ë¡œ ì¬ë°œê¸‰</span>\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/refresh\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> refreshToken <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>refreshToken<span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>refreshToken<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">401</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    jwt<span class=\"token punctuation\">.</span><span class=\"token function\">verify</span><span class=\"token punctuation\">(</span>\r\n        refreshToken<span class=\"token punctuation\">,</span>\r\n        process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">REFRESH_TOKEN_SECRET</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">sendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">403</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token keyword\">const</span> accessToken <span class=\"token operator\">=</span> <span class=\"token function\">generateAccessToken</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> accessToken <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// access token ìœ íš¨ì„± í™•ì¸ì„ ìœ„í•œ ì˜ˆì‹œ ìš”ì²­</span>\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">,</span> authenticateAccessToken<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Server running on </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">PORT</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"6-ì‹¤í–‰-ì˜ˆì‹œ\" style=\"position:relative;\"><a href=\"#6-%EC%8B%A4%ED%96%89-%EC%98%88%EC%8B%9C\" aria-label=\"6 ì‹¤í–‰ ì˜ˆì‹œ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. ì‹¤í–‰ ì˜ˆì‹œ</h2>\n<p>ì´ í¬ìŠ¤íŒ…ì—ì„œëŠ” ê²€ì‚¬ ë°©ì‹ìœ¼ë¡œ postmanì„ ì‚¬ìš©í–ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì¡´ì¬í•˜ëŠ” id, pwë¥¼ ì…ë ¥í•˜ë©´ access tokenê³¼ refresh tokenì„ ë°œê¸‰ë°›ê²Œ ëœë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/30a2b52e711bfd1e844aae63ce7ddbfe/8b70b/jwt1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.78625954198472%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfUlEQVR42qVUyW4TQRCdX+QHgsQBxRxIiO1IiCUsF+4cyRdw5BQpgTh2ZmxHUcgBCXHkAiHxbD09Sy/jR1U7gwYcIIiSnqpVXfW6qqu6vePDA4zGE0yOjhBMpjgMgh8IJhOMp2Qbj50e+b7DkHByRPuBT3tT+CenOH5/ilfb2/Beb3Vxf/0etjY28HB9Df3OKqGDzTsdPCbbs34fD9bu4kmv62ybtNdb7eBlv4Pn3XU8un0LT1du4MVmD52bK/CKJEUtBGxKOssIpKNzmPACNprBxCFUHKOKIvJJYMm3lhnKOIW8mEF/+Qz7cQrkAgc7O/A0LbQ1sHXtoLRGKhLIPEelFSqlUJJNGQPNsBaG/AxpRXvfpMGHmYUGsLe3B68qCrdhKIhRVRViyiiljCPKKgxDpJRlJlIIyi6jKkS6WFuVY/dTge4bgXNhMdzfJUIiyKR0jryu6XRNxGVZQlUlSkJB11Dk0tkqxqWfpSzn87mrjOVw8A4eG0SSuBNZciqVM2Sp57UL4OCSSHjdgG0NsdLG+Y8OBvB4wScxWNhJUsYs7WBj9BJhk6ExC0LfDxaEbWGH60rj2yTj03xeSfgvpNci/H1GC9Q1ldwqvyk5CK4oWZcFEhoVQV3P8gyStFIVDAGX3bREYGh2TW3cDGujnH3/7e4yIV92UZSQqUBEryFMMoJEGGfISxp0Td3V9iewnWUwGFxVMtxc5WmGWShwFuU4CyW+EuKsgsgVoUIqK6cZUZq72OFwuEzYnr826Ki/NmU4Gv2hKa34eRvzNpqmLAin9MX91xwujQ13mZ9aQR9EcflJ8DtuwK/mVxTkz+++JP+cdEgfiEgWT5V/m+9J307hn2NCVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jwt1\"\n        title=\"\"\n        src=\"/static/30a2b52e711bfd1e844aae63ce7ddbfe/1c1a4/jwt1.png\"\n        srcset=\"/static/30a2b52e711bfd1e844aae63ce7ddbfe/8ff13/jwt1.png 262w,\n/static/30a2b52e711bfd1e844aae63ce7ddbfe/3e286/jwt1.png 523w,\n/static/30a2b52e711bfd1e844aae63ce7ddbfe/1c1a4/jwt1.png 1046w,\n/static/30a2b52e711bfd1e844aae63ce7ddbfe/8b70b/jwt1.png 1266w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>ë°œê¸‰ë°›ì€ access tokenì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ headersì— authorization: 'bearer ' + access tokenë¥¼ ì²¨ë¶€í•œë‹¤. ë§Œì•½ tokenì´ ìœ íš¨í•˜ë‹¤ë©´ ìœ„ì—ì„œ ì„¤ëª…í•œ ëŒ€ë¡œ id, pwë¥¼ ë°œê¸‰ë°›ê²Œ ëœë‹¤. (ì˜ˆì‹œì¼ ë¿ ì‹¤ì œë¡œ pwë¥¼ ì£¼ëŠ” ê²½ìš°ëŠ” ê²°ì½” ì—†ë‹¤.)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7668ad132d1220b55b6c38b98e0c841b/8b70b/jwt2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.78625954198472%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQElEQVR42s1UPW8TQRC9v8gfCBIFitPYcWxLiI8Q0dBTkl9AmyYShtg+fysKKZAQJQ0iju272/vy7e358WaNwcIRkgUFIz3N3uzM25md2XMuu224gyGG4zH6wxG6/f5P9IdDDEa0DQZWu72eRYe4GnO/3+PeCL2ra1x+uMbr01M4b46P8KhyiONqFU8qZdRL+0QJjYMSnlUPcVKv43G5jOe1Gm0HaHCvtl/Cq3oJL44qePrwAU727uFlo4bS/T04ia9QKAUTBCjCEEUk6zm05yH3ifkt9HQCfTtB4c1gFP2iEKkXILqdQn/9AvNpBMQK7fNzOJoLbXKYorDIcg0/8KGiGKnWWBAZofMcuTH0NcjpJ+ssy3AT5fg4pR1As9mEs0gSu5EzSJAtFvB9HwExm04xvfkGxexDZh+IZjXyrVQIk8Vofk5QOwsxUQU679+SkARhFNkAWRueLDpJU+QZv9MYhWTFDGWvkEo29HK5ZGWSH9BtX8ARg2I2iieLCJnH+1s7L2mT4ISVyN4aUlXKQ43hNVGLuJ02HFlIsEBESITAkm3gT7b8R2yP42QJN0UcdhXz3xH+Xrrh2In0+bq2CHWawJ/NEMh4hMqOim0IL35ZrDKRjmvOq8yvNtQ6s/aLd81tQrnomAQpEcerGdV2RjNmU9yZscSItFqtu0uWrhn7QgyWO9yh67rbhJsn7toUt9v9+y6vmrIiHPEX92/HRrocx7HtYpL8asAam09tjYT+8u5t06hn8zmfrmcJ5W/zHR0DUbzI2GWIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jwt2\"\n        title=\"\"\n        src=\"/static/7668ad132d1220b55b6c38b98e0c841b/1c1a4/jwt2.png\"\n        srcset=\"/static/7668ad132d1220b55b6c38b98e0c841b/8ff13/jwt2.png 262w,\n/static/7668ad132d1220b55b6c38b98e0c841b/3e286/jwt2.png 523w,\n/static/7668ad132d1220b55b6c38b98e0c841b/1c1a4/jwt2.png 1046w,\n/static/7668ad132d1220b55b6c38b98e0c841b/8b70b/jwt2.png 1266w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>ë§Œì•½ ë§Œë£Œ ê¸°ê°„ì´ ì§€ë‚œ ê²½ìš°ëŠ” ì•„ë˜ì™€ ê°™ì´ ì ‘ê·¼ ê¸ˆì§€ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. ì´ëŸ° ê²½ìš° access tokenì„ refresh í•´ì•¼ í•˜ëŠ” ë° ì´ë•Œ ì‚¬ìš©í•˜ëŠ” í† í°ì´ ë°”ë¡œ refresh tokenì´ë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d3769d3a46f8778e319e1ef0a5c3c24/8b70b/jwt3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.78625954198472%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIklEQVR42s1Uu24TQRT1L/IDLihQnCaOsS0hFEJEQ09DfoGWIkVsJbZ3/UAQuUBClDSI2Ot434+ZWR/OnWBkJTFSJBdc6Wh27+PMvXPvTOWz00N/OMRoMoE7GmPgun8xHI+t3hmN7LrW94mrT7QPXdoYdzXFl+kU709PUflw3MSL+iGOGw0c1eto12poEe39Gl41DnHSauHlwQFeN5vU7Vt7c6+Gd60a3jyv4+jZU5xUn+Btu4m9ahWV1A9QhiFMwDWKUMbyfQO1XEL7xM0cyptBzWcolwuYkH5xhGwZIJ57UD9/wHybAGmIy7MzVFQSQhkNU5bQRKEV/MBHGCfIlEJOFITSGtoY+hrrJ99FUeA61vjqUQ/gvHPODNMEmgElnVZEnuXwfR8BsfA8eNe/EDL7iNkHsrIa+Q/DCKZI0Pmeovkxwiwq0e+S0GZGQs0MRAx3zvMcaZZBFzlMlqCUrGgXm2y8ua5WK1anbKzTu0AFd0TIljy/tfOKOglO09Ta1pByM25qDI+Jq8hg0L9PKCS2fCHbwL90cp63hIOHCR8r5g+h4zj/AeHdsm9L1tsJVZbCXyw4iwECDrGMihx+QT2ko2yC4qxmurDzWxiZ08LGXnY79wlLBsVxjJhzp2So2U1ZtQRtyV6aI9Lr9XZ7hlu7/FjSNaHr7qDL9qasCfkM7r5kaYBcfIF0c/N6PQS5gtaXj0oShVhwIkI+cyKdThe/AWRdUjJi4e6iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jwt3\"\n        title=\"\"\n        src=\"/static/0d3769d3a46f8778e319e1ef0a5c3c24/1c1a4/jwt3.png\"\n        srcset=\"/static/0d3769d3a46f8778e319e1ef0a5c3c24/8ff13/jwt3.png 262w,\n/static/0d3769d3a46f8778e319e1ef0a5c3c24/3e286/jwt3.png 523w,\n/static/0d3769d3a46f8778e319e1ef0a5c3c24/1c1a4/jwt3.png 1046w,\n/static/0d3769d3a46f8778e319e1ef0a5c3c24/8b70b/jwt3.png 1266w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>access tokenì„ ì¬ë°œê¸‰ë°›ì„ ë•ŒëŠ” refresh tokenì„ ì„œë²„ë¡œ ë³´ë‚´ì•¼ í•œë‹¤.(refresh tokenì„ ê¸°ë°˜ìœ¼ë¡œ access tokenì„ ë°œê¸‰ë°›ê¸° ë•Œë¬¸ì—) ë§Œì•½ refresh token ë˜í•œ ë§Œë£Œëœ ê²½ìš°ëŠ” ì²˜ìŒ ì§€ì •í•œ ìë™ ë¡œê·¸ì¸ ê¸°ê°„ì´ ì¢…ë£Œëœ ê²ƒì´ë¯€ë¡œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ redirect ì‹œí‚¤ë©´ ëœë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0097b46c35de2af25d4c6a8dce068a31/8b70b/jwt4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.78625954198472%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACXUlEQVR42sVUW2sTURDev+gfEFQQE9CmSSOIl1p88Af4JP0HPvpUMGnaZHdzUWofBPHRF6E22cvZ67lsPmdOsiHYKggFBz7O7MzsNzPnzDnOR/cUI3+MyWwGfzKB6/sbjKdTa/fIzvrI8yyGhLOZB9/34I6n8M7O8enzOd4eHsJ5t9/Bk9Yu9tttPGvtoNt4QGjgcbOBF+1dHHT38HTnEV7udcjWtOiQ/023iVedFp7fv4uD27fwutvBw3t34OSRQCUETByjShJUKesBVBhCRwFkSAhIDy5RBRfQizlMuEBOtvRyDvXjO8zXKZAJnB4dwVGkKKNhqspCaoUojiDSDKWSyMsShVTQFKPJJxXpmnRjIKXERarxZW6gAPT6PThlnluH5kCCJIIwjBBTxUEQYLFYIArmECImCCTUBa9CJDAyw4dvOTrvE/wUBu4JExJBkqY2kPWKq6QERVEQeUG2AkUSI89S62ewn+MMVcnCnbG4g2M4y+USIopsVpbSVhjattjHqAgZdcI+TmSTrZMymVIrYt8dwbEZKFOdrc5ck21Iyf4nGydn8cbjFeG2cMC/Sl2M5/n/mXBp/bwtq32tW69bdukGXSFURY6IRkXQqSdpgpRWHiUtSywrs6lIGRqzStv5VFpa+0m/f5WQN5pPNIkFglBgEaUWQZSgKGlONQ20WmOtZ8WKcDAYXNNyfdLUhlr/WK6hTbWB2tJLqey/w+HoZg9lNPoLIS+/Y/tg6g+ON3pF6LruTVdIhFmWIadDyNePhKIH4jrU95jj+N4XeYYsEfbxEFFoy+31j/ELu7xQKWzryY0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jwt4\"\n        title=\"\"\n        src=\"/static/0097b46c35de2af25d4c6a8dce068a31/1c1a4/jwt4.png\"\n        srcset=\"/static/0097b46c35de2af25d4c6a8dce068a31/8ff13/jwt4.png 262w,\n/static/0097b46c35de2af25d4c6a8dce068a31/3e286/jwt4.png 523w,\n/static/0097b46c35de2af25d4c6a8dce068a31/1c1a4/jwt4.png 1046w,\n/static/0097b46c35de2af25d4c6a8dce068a31/8b70b/jwt4.png 1266w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"ì°¸ê³ \" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"ì°¸ê³  permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ì°¸ê³ ]</h2>\n<ul>\n<li><a href=\"https://www.npmjs.com/package/jsonwebtoken\">https://www.npmjs.com/package/jsonwebtoken</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=mbsmsi7l3r4\">https://www.youtube.com/watch?v=mbsmsi7l3r4</a></li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"#1-%EC%84%9C%EB%A1%A0\">1. ì„œë¡ </a></li>\n<li><a href=\"#2-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%A0%95\">2. í™˜ê²½ ì„¤ì •</a></li>\n<li><a href=\"#3-%ED%8F%B4%EB%8D%94-%EA%B5%AC%EC%A1%B0\">3. í´ë” êµ¬ì¡°</a></li>\n<li><a href=\"#4-env\">4. .env</a></li>\n<li><a href=\"#5-jwtjs\">5. jwt.js</a></li>\n<li><a href=\"#6-%EC%8B%A4%ED%96%89-%EC%98%88%EC%8B%9C\">6. ì‹¤í–‰ ì˜ˆì‹œ</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">[ì°¸ê³ ]</a></li>\n</ul>","frontmatter":{"author":"millo","category":"nodejs","description":"nodejsì—ì„œ JWTë¥¼ ì‚¬ìš©í•œ ì¸ì¦ ë°©ì‹ì„ êµ¬í˜„í•´ë³´ì.","image":{"childImageSharp":{"fixed":{"src":"/static/f695947583c0c0242859d127bd9962e0/2244e/jwt.jpg"}}},"lang":"ko","released_at":"2021-02-01 14:00","series":"Authentication ë°©ì‹ ì •ë¦¬í•˜ê¸°","tags":["Authentication","nodejs","jsonwebtoken","JWT","JWT Auth"],"title":"[Node.js] JWT ì‚¬ìš©í•˜ê¸°","translation":null,"updated_at":null},"fields":{"slug":"/Nodejs-JWT-ì‚¬ìš©í•˜ê¸°/"}},"allMarkdownRemark":{"nodes":[{"frontmatter":{"lang":"ko","title":"Session ê¸°ë°˜ ì¸ì¦ ë°©ì‹"},"fields":{"slug":"/Session-ê¸°ë°˜-ì¸ì¦ë°©ì‹/"}},{"frontmatter":{"lang":"ko","title":"JWT ê¸°ë°˜ ì¸ì¦ ë°©ì‹"},"fields":{"slug":"/JWT-ê¸°ë°˜-ì¸ì¦ë°©ì‹/"}},{"frontmatter":{"lang":"ko","title":"[Node.js] express session ì‚¬ìš©í•˜ê¸°"},"fields":{"slug":"/Nodejs-express-session-ì‚¬ìš©í•˜ê¸°/"}},{"frontmatter":{"lang":"ko","title":"[Node.js] JWT ì‚¬ìš©í•˜ê¸°"},"fields":{"slug":"/Nodejs-JWT-ì‚¬ìš©í•˜ê¸°/"}},{"frontmatter":{"lang":"ko","title":"[Node.js] passport session ì‚¬ìš©í•˜ê¸°"},"fields":{"slug":"/Nodejs-passport-session-ì‚¬ìš©í•˜ê¸°/"}},{"frontmatter":{"lang":"ko","title":"OAuth 2.0 ê¸°ë°˜ ì¸ì¦ ë°©ì‹"},"fields":{"slug":"/OAuth2-ê¸°ë°˜-ì¸ì¦ë°©ì‹/"}},{"frontmatter":{"lang":"ko","title":"[Node.js] passport Google OAuth 2.0 ë¡œê·¸ì¸ ì‚¬ìš©í•˜ê¸°"},"fields":{"slug":"/Nodejs-passport-Google-OAuth-2-ë¡œê·¸ì¸-ì‚¬ìš©í•˜ê¸°/"}}]}},"pageContext":{"slug":"/Nodejs-JWT-ì‚¬ìš©í•˜ê¸°/","series":"Authentication ë°©ì‹ ì •ë¦¬í•˜ê¸°"}},"staticQueryHashes":["104535566","2083168511","3061319093","3557473807","356676075","3868781503"],"slicesMap":{}}