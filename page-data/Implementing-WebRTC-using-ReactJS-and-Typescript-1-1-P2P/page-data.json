{"componentChunkName":"component---src-components-post-post-page-tsx","path":"/Implementing-WebRTC-using-ReactJS-and-Typescript-1-1-P2P/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"1-explanation-of-terms\" style=\"position:relative;\"><a href=\"#1-explanation-of-terms\" aria-label=\"1 explanation of terms permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Explanation of terms</h1>\n<h2 id=\"mediastreamgetusermedia\" style=\"position:relative;\"><a href=\"#mediastreamgetusermedia\" aria-label=\"mediastreamgetusermedia permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MediaStream(getUserMedia)</h2>\n<p>It accesses data streams from places like the user’s camera and microphone.\nIt has the input created in navigator.mediaDevices.getUserMedia() and the output passed to the video tag or RTCPeerConnection.\n3 parameters received by navigator.mediaDevices.getUserMedia() —</p>\n<ul>\n<li>Constrained object (whether video is used (or resolution), audio is used, etc.)</li>\n<li>Callback on success (MediaStream)</li>\n<li>Callback on failure (error)</li>\n</ul>\n<p>getUserMedia() must be used on a server other than a local file system. Otherwise, a PERMISSION_DENIED: 1 error occurs.</p>\n<h2 id=\"rtcpeerconnection\" style=\"position:relative;\"><a href=\"#rtcpeerconnection\" aria-label=\"rtcpeerconnection permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RTCPeerConnection</h2>\n<p>It has the function of encryption and bandwidth management, and makes an audio or video connection.\nIt is a WebRTC component that processes data between peers in a stable and efficient manner.\nThe following is a WebRTC architecture diagram showing the role of RTCPeerConnection. The green part behind RTCPeerConnection is very complicated, but it is part that web developers do not have to deal with.</p>\n<ul>\n<li>packet loss concealment</li>\n<li>echo cancellation</li>\n<li>bandwidth adaptivity</li>\n<li>dynamic jitter buffering</li>\n<li>automatic gain control</li>\n<li>noise reduction and suppression</li>\n<li>image 'cleaning'.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 740px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bdb06850633916f99cc1b78baf5a43b3/50383/webrtcArchitecture.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.2671755725191%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACtElEQVQoz0WSW1PaUBCA+XV9qk9Oa2c6fawPvYztD+hT27FeB6NwciEOBCMXFYGIMeSCcpF6ASsyUq2XhsCA2toSCwRMSA9Kpzvn7Nnd2W92z85aOqZp6IZpmlvpU4pMQUPkDpd8u9DQtDbUEl9gAntGp3PbNgwDppu6rrdarU6nY4EOfKBOxr86MQla3Mqez73ZDXWvGV3NLdGb+p1zn9lut1VV7cLtW11V6zEuTyAJMB73udMEEreNSZFAJikW1kJZ3BoHExuRQHYjelitXOtGrz4Uy7VaL8oXbwY8QwO+t0/9r/s9Lx+5Xjx2PnuAPu+bHewjh554YPxVv2fwoXs3fdIy9NpN864L03LT0BqahvsX8YB3nmdogaGjQTK89G7EQ/NBmg/RfHguGqIFqBm5WoFY7U/j/gsWraXnzo4mV5ZRkbNHWSsT+uSnRxe9H+c9H+Zcwx63dSUEBNbOs5ORIJtJQEytN3ttNzX9sHw0w87YIjMOkYAHsLYx/zgSmkLXABYF0wxiX7W5Ek5iHRXzsY5h/vxdazQacGwWTdPzypGds9mZKYIHVNKJi6SDB9iazbtNOZMulCccAqBTTmqTFA+68HVN/Qe3jP3vBUzCUQ6zswDjHZg4S8ZIJDwNOEBIJCrMEgIOWECs48KBBOH/bUM4JxeAYEeCY9blMTKGYqID5aZRFjYyjQkE4FE8imBrCBGbEXKSoffg7sCaTePs6hgIcxPL4fduys5FqNS8lWFGFrwTwbA77cGlwLDXN7qwMMUupI7jcFlq9cb9BlmqVzc/fv9idrawlSTiX3XHdoI7MXr9i5PfoqT9UCa29HmbEvdcYtabzJyUiw3ttlcZwqmNnMRlK9XKuXxeqZbzp4qw+01WZKVULJeLp8plIi/LJUWWz0olRVHKF5dXzaZ2L38BZ4thnd+yj9MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"webrtcArchitecture\"\n        title=\"webrtcArchitecture\"\n        src=\"/static/bdb06850633916f99cc1b78baf5a43b3/50383/webrtcArchitecture.png\"\n        srcset=\"/static/bdb06850633916f99cc1b78baf5a43b3/8ff13/webrtcArchitecture.png 262w,\n/static/bdb06850633916f99cc1b78baf5a43b3/3e286/webrtcArchitecture.png 523w,\n/static/bdb06850633916f99cc1b78baf5a43b3/50383/webrtcArchitecture.png 740w\"\n        sizes=\"(max-width: 740px) 100vw, 740px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n<h1 id=\"2-implementation-method\" style=\"position:relative;\"><a href=\"#2-implementation-method\" aria-label=\"2 implementation method permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Implementation method</h1>\n<h2 id=\"simple-connection-structure\" style=\"position:relative;\"><a href=\"#simple-connection-structure\" aria-label=\"simple connection structure permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Simple connection structure</h2>\n<p>The Fig. 2 below is a quick overview of the way we will implement it today. In the Fig. 2, the expressions Caller and Callee represent a method reminiscent of Google hangout. Caller sends its SessionDescription through Signaling Server, and Callee sends its SessionDescription through Signaling Server as well. In addition, ICECandidate is exchanged through the signaling server, the connection between peers is completed, and media data is exchanged between the caller and the callee.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 834px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/62fe016965fe12ef0df3e4b565caadd4/5d72a/jsep.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.213740458015266%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACO0lEQVQoz3VSS2gTURSdtSgFd25c6KJQtVBcCC5ERIVW0UI0IAiCLhStikg3LvxRUVEoiiJBqYhGSWwoaZtGXKQJ2Ma0YrGpjWA+rY0JJpl8pvNm3m/e9c34aRW9i8e7n3M/514F/iOWAERBw7BIoIHBoP+IUZYrnHPKmCUEgJAYaoH45dIpYMoZo5Zl/Q0WNgC0emNmeqZYKJqYqDr7HSR9GhZqTUt9nJ3LzNm6k1WxhJ1pOB3rGOw6GO5uHzx1cey+9GkEMLOb5xbUTYEYEEbOjN7YM3TaNXJ+39DZRCGpcAf84lO4xXdgd6hro999PNIDNsaSM+sEEAHC7UIIm52hc5sDh3eGTm7yu6Nf3inINKTDmxpZ/6xz68CxlpfuE7HrTqtiqW1nKJMS16vu1v5DWwJHmr2uyPykoqqqgcxvqDReSETS0edxX/j962w2l8/nhSMSRjCey+UymUxwctiX6B/Lx+PFiYpRVdRqbWE+O5s3BqbBN4G9b+loCpuGbppYIiW38pUjmKahLaLQB/x03AhM8WASSg0u2ybA9Adv0IpLvLnXauqB/U8wCGpTxfmP4oxzWb+m07a7ZM1NWHebr7rMop+xwp21eeJk5RXRdg9WX4O9fQYniMiNc16ulNVqVX6FxUo11NqL196CDXeg6aqIpYniEAnBJNnuYR2P+TYPvxCm9oE5drWi1ur1n3eC+VE/2fGQt/fxXY/Y1AJRlg5BkPLXHGpU/mR6uUir1VCLlYK8E1lAfAeBAG3POyXjEwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jsep\"\n        title=\"jsep\"\n        src=\"/static/62fe016965fe12ef0df3e4b565caadd4/5d72a/jsep.png\"\n        srcset=\"/static/62fe016965fe12ef0df3e4b565caadd4/8ff13/jsep.png 262w,\n/static/62fe016965fe12ef0df3e4b565caadd4/3e286/jsep.png 523w,\n/static/62fe016965fe12ef0df3e4b565caadd4/5d72a/jsep.png 834w\"\n        sizes=\"(max-width: 834px) 100vw, 834px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"stun-server-operation\" style=\"position:relative;\"><a href=\"#stun-server-operation\" aria-label=\"stun server operation permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STUN server operation</h2>\n<p>In the Fig. 3 below, you can find out your own public address through the STUN server and find out whether you can access it (Symmetric NAT restriction). The other parts are the same as the Fig. 2 description above. Relay server represents a TURN server and is a method that bypasses symmetric NAT restrictions. This method incurs overhead and should be used only when there is no alternative.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 834px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e9a18ac364fd8801988f8f77b7c32ad7/5d72a/stun.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.213740458015266%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgUlEQVQoz4VSSy9DQRS+v9gPYMfKgggrbdiQICzaRsQrsSiq8aYNUYkmtHrrVm/nzvvpTC9JRXEyi/P4vjPfmTOBG2ZMOSKd0P6Ag4Wzdggs+JlSxhMGDVpAOzD7LxmgWHyDSbi/n/mfbLRqtrtEGOOctk4bx7ULOz0lxV+yjTGUUkKINYYrl3ALEmBgIFtrMcZQHU5mjCVJIqV0v5sQYhDjyWlXRqm1n4MZ452l/N5kdpWLAbUWNBkPZuyTDEHazFib8kE5Qmh9c3djaz+KolRtv2jNF4BzEWitGCU+fm2o1PEFPqiWcwZJX2q3SDvsv45mFAeNFmm2YojPt7YfKtVegmAqCN9jJJUGJ0ZYKU0wJkLclU7K+weQpFTWnjpBdvm4sHPrLB+bWVxYK6C4KwU/u66MjM8+1l+aYTQyMXd0dgU7SHpxZiU3Op2BDZ5e3E/NHwaNxnMqu5TLt+t1/yWEiDqd86sbkIBQcnp5/RZFSkqYtVos1splwHS772HY/ABcjqyjOudRPQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"stun\"\n        title=\"stun\"\n        src=\"/static/e9a18ac364fd8801988f8f77b7c32ad7/5d72a/stun.png\"\n        srcset=\"/static/e9a18ac364fd8801988f8f77b7c32ad7/8ff13/stun.png 262w,\n/static/e9a18ac364fd8801988f8f77b7c32ad7/3e286/stun.png 523w,\n/static/e9a18ac364fd8801988f8f77b7c32ad7/5d72a/stun.png 834w\"\n        sizes=\"(max-width: 834px) 100vw, 834px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"data-flow-after-connection\" style=\"position:relative;\"><a href=\"#data-flow-after-connection\" aria-label=\"data flow after connection permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data flow after connection</h2>\n<p>The Fig. 4 below shows the data flow between peers when the peer connection is completed. If a TURN server is not required (unless Symmetric NAT restrictions are applied), communication between peers is performed without a relay server, and if a TURN server is required ( If symmetric NAT restrictions are applied), data sent and received by all peers must be transferred to the TURN server together.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 834px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bb457c0a93a7611051e438c17c28c5ed/5d72a/dataPathways.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.213740458015266%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABeUlEQVQoz3VS22rCQBDNb5d+g1D61lYQChbsg9gL1FJa+mCtILQvReyDgkhJTKJJNNlb9tKTxEapOoTszO6ZmXOGscw+Y9IkwnCZfXBibpTeA7N2r4CLhdkGowRNM0cfSta5wZHaLHnhrk1IQ8R/2IHOMrW9IGYZUxTCARWOH6WC76etlJrNZovFgjEWxzFClpoVUyuuIQGcldK4x2sQBI7jALBJBhPf9z3PE0KYw8Y5BywMw4K5VWQmScIZM39icl3q6v75svWEJpsBwNGa5rZOBh+U3B4Gaq2Wy9Nao95qh0FACC1fSwBjwpIypSTOYsdWjBJKXdctapV4SIVOISX1vcRz8xlJZFm2mzhuhPjzoT0aDCnywH93bSjlSn33ev2XV4SUpqPJ3Lqov988fhnFjk9q1cZt3puCFf5RFGG2ZUiTuHp9d1Q5NzrtfwwrZ2/WdDohSUa702w643G2JFIWQwJbQkg2OrBMsxUbdDrDbhfOYj637Z9fCaexZkgM+JwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"dataPathways\"\n        title=\"dataPathways\"\n        src=\"/static/bb457c0a93a7611051e438c17c28c5ed/5d72a/dataPathways.png\"\n        srcset=\"/static/bb457c0a93a7611051e438c17c28c5ed/8ff13/dataPathways.png 262w,\n/static/bb457c0a93a7611051e438c17c28c5ed/3e286/dataPathways.png 523w,\n/static/bb457c0a93a7611051e438c17c28c5ed/5d72a/dataPathways.png 834w\"\n        sizes=\"(max-width: 834px) 100vw, 834px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"signalsoffer-and-answer\" style=\"position:relative;\"><a href=\"#signalsoffer-and-answer\" aria-label=\"signalsoffer and answer permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Signals(Offer and Answer)</h2>\n<p>The Fig. 5 below is not clearly depicted in the above pictures, so the data exchanged through the actual Signaling server is not clearly drawn. In the above pictures, I explained what request the peer’s NAT sends to the STUN server, so I excluded the NAT part picture from the picture I drew (actually, each NAT exists in the peer). This is the part that I directly checked while recording logs on the client and signaling server. (If there is something wrong, please explain it in the comments and I will correct it!)</p>\n<h3>Let’s look at the sequence.</h3>\n<ol>\n<li>First, each peer receives its own Public Address and whether it is accessible to the STUN server.</li>\n<li>Peer1 first creates its SessionDescription through createOffer and delivers it to Peer2 through Signaling Server. (In this picture, Peer1 is the Caller role in the picture above)</li>\n<li>Peer2 receives Peer1’s SessionDescription, creates its own SessionDescription through createAnswer in response to this, and delivers it to Peer1 through Signaling Server.</li>\n<li>After both Peer1 and Peer2 create their own SessionDescription, they start to create their own ICECandidate information, and each transmits it to each other.</li>\n<li>Each other’s MediaStream is exchanged through peer-to-peer communication.</li>\n<li>If there is a Peer with Symmetric NAT among Peer1 and Peer2, you must use the TURN server to connect to the data relay.</li>\n</ol>\n<p>The above explanation is about the signals that are sent and received. In fact, there are more parts to be concerned about when implementing the code.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/87e540bd06555cf439636aacb71c4066/9580b/webrtc.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.61068702290076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAD/9oADAMBAAIQAxAAAAHolMmSB//EABoQAQABBQAAAAAAAAAAAAAAAAECABARITH/2gAIAQEAAQUCsywnGpG//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGBABAQEBAQAAAAAAAAAAAAAAAQARITH/2gAIAQEAAT8hm5Et0S0lfV//2gAMAwEAAgADAAAAELgP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEhEf/aAAgBAQABPxB2QyrDQYx9qtoyIxvB/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"webrtc\"\n        title=\"webrtc\"\n        src=\"/static/87e540bd06555cf439636aacb71c4066/b4719/webrtc.jpg\"\n        srcset=\"/static/87e540bd06555cf439636aacb71c4066/24ff0/webrtc.jpg 262w,\n/static/87e540bd06555cf439636aacb71c4066/8df40/webrtc.jpg 523w,\n/static/87e540bd06555cf439636aacb71c4066/b4719/webrtc.jpg 1046w,\n/static/87e540bd06555cf439636aacb71c4066/940ce/webrtc.jpg 1569w,\n/static/87e540bd06555cf439636aacb71c4066/7cf90/webrtc.jpg 2092w,\n/static/87e540bd06555cf439636aacb71c4066/9580b/webrtc.jpg 3967w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1 id=\"3-code\" style=\"position:relative;\"><a href=\"#3-code\" aria-label=\"3 code permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Code</h1>\n<h2 id=\"signaling-servernodejs\" style=\"position:relative;\"><a href=\"#signaling-servernodejs\" aria-label=\"signaling servernodejs permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Signaling Server(Node.js)</h2>\n<blockquote>\n<p><strong>Note</strong> <br /> You must use socket.io version=2.3.0.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> socketToRoom <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> maximum <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n\nio<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'connection'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">socket</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    socket<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'join_room'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">.</span>room<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> users<span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">.</span>room<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>length <span class=\"token operator\">===</span> maximum<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                socket<span class=\"token punctuation\">.</span><span class=\"token function\">to</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'room_full'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            users<span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">.</span>room<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>id<span class=\"token operator\">:</span> socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> email<span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            users<span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">.</span>room<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>id<span class=\"token operator\">:</span> socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> email<span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        socketToRoom<span class=\"token punctuation\">[</span>socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>room<span class=\"token punctuation\">;</span>\n\n        socket<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>room<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>socketToRoom<span class=\"token punctuation\">[</span>socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">]: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>socket<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> enter</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">const</span> usersInThisRoom <span class=\"token operator\">=</span> users<span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">.</span>room<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>usersInThisRoom<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        io<span class=\"token punctuation\">.</span>sockets<span class=\"token punctuation\">.</span><span class=\"token function\">to</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'all_users'</span><span class=\"token punctuation\">,</span> usersInThisRoom<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    socket<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'offer'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">sdp</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'offer: '</span> <span class=\"token operator\">+</span> socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        socket<span class=\"token punctuation\">.</span>broadcast<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'getOffer'</span><span class=\"token punctuation\">,</span> sdp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nRTCSessionDescription<span class=\"token punctuation\">)</span>\n    socket<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'answer'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">sdp</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'answer: '</span> <span class=\"token operator\">+</span> socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        socket<span class=\"token punctuation\">.</span>broadcast<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'getAnswer'</span><span class=\"token punctuation\">,</span> sdp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    socket<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'candidate'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">candidate</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'candidate: '</span> <span class=\"token operator\">+</span> socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        socket<span class=\"token punctuation\">.</span>broadcast<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'getCandidate'</span><span class=\"token punctuation\">,</span> candidate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    socket<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'disconnect'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>socketToRoom<span class=\"token punctuation\">[</span>socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">]: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>socket<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> exit</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> roomID <span class=\"token operator\">=</span> socketToRoom<span class=\"token punctuation\">[</span>socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> room <span class=\"token operator\">=</span> users<span class=\"token punctuation\">[</span>roomID<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>room<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            room <span class=\"token operator\">=</span> room<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            users<span class=\"token punctuation\">[</span>roomID<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> room<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        socket<span class=\"token punctuation\">.</span>broadcast<span class=\"token punctuation\">.</span><span class=\"token function\">to</span><span class=\"token punctuation\">(</span>room<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user_exit'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>id<span class=\"token operator\">:</span> socket<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>As explained previously, Signaling Server only helps the connection between WebRTC peers, and there is no server load. Therefore, the server is configured very simply.</p>\n<h2 id=\"clientreactjs-typescript\" style=\"position:relative;\"><a href=\"#clientreactjs-typescript\" aria-label=\"clientreactjs typescript permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Client(ReactJS, Typescript)</h2>\n<blockquote>\n<p><strong>Note</strong> <br /> You must use socket.io-client version=2.3.0, @types/socket.io-client version=1.4.34.</p>\n</blockquote>\n<h3>Variables to use in the client</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>pc<span class=\"token punctuation\">,</span> setPc<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>RTCPeerConnection<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>socket<span class=\"token punctuation\">,</span> setSocket<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SocketIOClient<span class=\"token punctuation\">.</span>Socket<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> localVideoRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>HTMLVideoElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> remoteVideoRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>HTMLVideoElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> pc_config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    iceServers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\">// {</span>\n        <span class=\"token comment\">//   urls: 'stun:[STUN_IP]:[PORT]',</span>\n        <span class=\"token comment\">//   'credentials': '[YOR CREDENTIALS]',</span>\n        <span class=\"token comment\">//   'username': '[USERNAME]'</span>\n        <span class=\"token comment\">// },</span>\n        <span class=\"token punctuation\">{</span>\n            urls<span class=\"token operator\">:</span> <span class=\"token string\">\"stun:stun.l.google.com:19302\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Socket event</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">let</span> newSocket <span class=\"token operator\">=</span> io<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://localhost:8080\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> newPC <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RTCPeerConnection</span><span class=\"token punctuation\">(</span>pc_config<span class=\"token punctuation\">)</span>\n\nnewSocket<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"all_users\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">allUsers<span class=\"token operator\">:</span> Array<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span> email<span class=\"token operator\">:</span> string <span class=\"token punctuation\">}</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> len <span class=\"token operator\">=</span> allUsers<span class=\"token punctuation\">.</span>length\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>len <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">createOffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nnewSocket<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"getOffer\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">sdp<span class=\"token operator\">:</span> RTCSessionDescription</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//console.log(sdp);</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get offer\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">createAnswer</span><span class=\"token punctuation\">(</span>sdp<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nnewSocket<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"getAnswer\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">sdp<span class=\"token operator\">:</span> RTCSessionDescription</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get answer\"</span><span class=\"token punctuation\">)</span>\n    newPC<span class=\"token punctuation\">.</span><span class=\"token function\">setRemoteDescription</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RTCSessionDescription</span><span class=\"token punctuation\">(</span>sdp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//console.log(sdp);</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nnewSocket<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"getCandidate\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">candidate<span class=\"token operator\">:</span> RTCIceCandidateInit</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    newPC<span class=\"token punctuation\">.</span><span class=\"token function\">addIceCandidate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RTCIceCandidate</span><span class=\"token punctuation\">(</span>candidate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"candidate add success\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">setSocket</span><span class=\"token punctuation\">(</span>newSocket<span class=\"token punctuation\">)</span>\n<span class=\"token function\">setPc</span><span class=\"token punctuation\">(</span>newPC<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>MediaStream setup and RTCPeerConnection event</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">navigator<span class=\"token punctuation\">.</span>mediaDevices\n    <span class=\"token punctuation\">.</span><span class=\"token function\">getUserMedia</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        video<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        audio<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stream</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>localVideoRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> localVideoRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>srcObject <span class=\"token operator\">=</span> stream\n\n        stream<span class=\"token punctuation\">.</span><span class=\"token function\">getTracks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">track</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            newPC<span class=\"token punctuation\">.</span><span class=\"token function\">addTrack</span><span class=\"token punctuation\">(</span>track<span class=\"token punctuation\">,</span> stream<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        newPC<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onicecandidate</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>candidate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"onicecandidate\"</span><span class=\"token punctuation\">)</span>\n                newSocket<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"candidate\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>candidate<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        newPC<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">oniceconnectionstatechange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n        newPC<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">ontrack</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">ev</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add remotetrack success\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>remoteVideoRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span>\n                remoteVideoRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>srcObject <span class=\"token operator\">=</span> ev<span class=\"token punctuation\">.</span>streams<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n\n        newSocket<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"join_room\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> room<span class=\"token operator\">:</span> <span class=\"token string\">\"1234\"</span><span class=\"token punctuation\">,</span> email<span class=\"token operator\">:</span> <span class=\"token string\">\"sample@naver.com\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">getUserMedia error: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Send offer signal to other peer</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createOffer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"create offer\"</span><span class=\"token punctuation\">)</span>\n    newPC\n        <span class=\"token punctuation\">.</span><span class=\"token function\">createOffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> offerToReceiveAudio<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> offerToReceiveVideo<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">sdp</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            newPC<span class=\"token punctuation\">.</span><span class=\"token function\">setLocalDescription</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RTCSessionDescription</span><span class=\"token punctuation\">(</span>sdp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            newSocket<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"offer\"</span><span class=\"token punctuation\">,</span> sdp<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Send answer signal to other peer</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createAnswer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">sdp<span class=\"token operator\">:</span> RTCSessionDescription</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    newPC<span class=\"token punctuation\">.</span><span class=\"token function\">setRemoteDescription</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RTCSessionDescription</span><span class=\"token punctuation\">(</span>sdp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"answer set remote description success\"</span><span class=\"token punctuation\">)</span>\n        newPC\n            <span class=\"token punctuation\">.</span><span class=\"token function\">createAnswer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                offerToReceiveVideo<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                offerToReceiveAudio<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">sdp1</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"create answer\"</span><span class=\"token punctuation\">)</span>\n                newPC<span class=\"token punctuation\">.</span><span class=\"token function\">setLocalDescription</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RTCSessionDescription</span><span class=\"token punctuation\">(</span>sdp1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                newSocket<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"answer\"</span><span class=\"token punctuation\">,</span> sdp1<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Video rendering of yourself and the other user’s</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span>\n            <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n                width<span class=\"token operator\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">,</span>\n                height<span class=\"token operator\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">,</span>\n                margin<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n                backgroundColor<span class=\"token operator\">:</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">muted</span>\n            <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>localVideoRef<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">autoPlay</span>\n        <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span>\n            <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>remotevideo<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n                width<span class=\"token operator\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">,</span>\n                height<span class=\"token operator\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">,</span>\n                margin<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n                backgroundColor<span class=\"token operator\">:</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>remoteVideoRef<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">autoPlay</span>\n        <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h1 id=\"github\" style=\"position:relative;\"><a href=\"#github\" aria-label=\"github permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[GitHub]</h1>\n<ul>\n<li><a href=\"https://github.com/millo-L/Typescript-ReactJS-WebRTC-1-1-P2P\">https://github.com/millo-L/Typescript-ReactJS-WebRTC-1-1-P2P</a></li>\n</ul>\n<h1 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[References]</h1>\n<ul>\n<li><a href=\"https://www.html5rocks.com/en/tutorials/webrtc/basics/\">https://www.html5rocks.com/en/tutorials/webrtc/basics/</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection\">https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection</a></li>\n</ul>","id":"006991d1-467a-5028-9dd8-5ad3356d77f4","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-explanation-of-terms\">1. Explanation of terms</a></p>\n<ul>\n<li><a href=\"#mediastreamgetusermedia\">MediaStream(getUserMedia)</a></li>\n<li><a href=\"#rtcpeerconnection\">RTCPeerConnection</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-implementation-method\">2. Implementation method</a></p>\n<ul>\n<li><a href=\"#simple-connection-structure\">Simple connection structure</a></li>\n<li><a href=\"#stun-server-operation\">STUN server operation</a></li>\n<li><a href=\"#data-flow-after-connection\">Data flow after connection</a></li>\n<li><a href=\"#signalsoffer-and-answer\">Signals(Offer and Answer)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-code\">3. Code</a></p>\n<ul>\n<li><a href=\"#signaling-servernodejs\">Signaling Server(Node.js)</a></li>\n<li><a href=\"#clientreactjs-typescript\">Client(ReactJS, Typescript)</a></li>\n</ul>\n</li>\n<li><a href=\"#github\">GitHub</a></li>\n<li><a href=\"#references\">References</a></li>\n</ul>","frontmatter":{"author":"millo","description":"Based on the theory of WebRTC, let's implement 1:1 P2P real-time video transmission.","category":"webrtc","released_at":"2020-12-25","updated_at":"2020-12-26","tags":["WebRTC","P2P","Mesh","SignalingServer","nodejs","reactjs","typescript"],"title":"Implementing WebRTC using ReactJS and Typescript (1:1 P2P)","lang":"en","series":"WebRTC theory to practice","translation":"/WebRTC-구현하기-1-1-P2P/","image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABI0lEQVQoz41Sz0uEQBT2L5S6dxeCLh26eZIMoj2W5iUPUpJCwgaFoLCVhIgoRuytWyAdOiWyOeOX4zLbrsWyH7xf8948vnlvBHRo2xaU0oWwmJ91Zm4p6Xy6UrcsvI/A1Fq0FJuA9xGYqusaWZZhMpkgSRJUVYWyLPH6UvRF07GPr+sLfHy+4+rShu/7ME0TQRDAcRwUxbyOMRU4XVVVIYoiJEmCLMs4VI+wv7eL05t7jB/eQKbnuLs9wNb2DnT9DJZlQVEUeJ7Xk1k8mRDSB2EYwnVd2LYNwzD6CyejEdLnCN+Zi+NCR5A/IvQDPEUR0jRFnufQNA1xHP8y5M7a+TQzkKbZbIbc4dtijIcb5Guj7epPWPb/bJl/laEMc6z7fzmOH+JoUHn0gycpAAAAAElFTkSuQmCC","aspectRatio":2.4691358024691357,"src":"/static/5d1a4dc7a92facc014378e28932bee9a/8a558/webrtc.png","srcSet":"/static/5d1a4dc7a92facc014378e28932bee9a/69585/webrtc.png 200w,\n/static/5d1a4dc7a92facc014378e28932bee9a/497c6/webrtc.png 400w,\n/static/5d1a4dc7a92facc014378e28932bee9a/8a558/webrtc.png 539w","sizes":"(max-width: 539px) 100vw, 539px"}}}},"fields":{"slug":"/Implementing-WebRTC-using-ReactJS-and-Typescript-1-1-P2P/"}},"site":{"siteMetadata":{"siteUrl":"https://millo-L.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"About WebRTC","lang":"en"},"fields":{"slug":"/About-WebRTC/"}}},{"node":{"frontmatter":{"title":"WebRTC implementation method(Mesh, SFU, MCU)","lang":"en"},"fields":{"slug":"/WebRTC-implementation-method-Mesh-SFU-MCU/"}}},{"node":{"frontmatter":{"title":"Implementing WebRTC using ReactJS and Typescript (1:1 P2P)","lang":"en"},"fields":{"slug":"/Implementing-WebRTC-using-ReactJS-and-Typescript-1-1-P2P/"}}},{"node":{"frontmatter":{"title":"Implementing WebRTC using ReactJS and Typescript (1:N P2P)","lang":"en"},"fields":{"slug":"/Implementing-WebRTC-using-ReactJS-and-Typescript-1-N-P2P/"}}},{"node":{"frontmatter":{"title":"Implementing WebRTC using ReactJS and Typescript (1:N SFU)","lang":"en"},"fields":{"slug":"/Implementing-WebRTC-using-ReactJS-and-Typescript-1-N-SFU/"}}},{"node":{"frontmatter":{"title":"WebRTC Performance Comparison (P2P vs SFU)","lang":"en"},"fields":{"slug":"/WebRTC-Performance-Comparison-P2P-vs-SFU/"}}}]}},"pageContext":{"slug":"/Implementing-WebRTC-using-ReactJS-and-Typescript-1-1-P2P/","series":"WebRTC theory to practice"}},"staticQueryHashes":["1608878238","3469517283","764694655"]}