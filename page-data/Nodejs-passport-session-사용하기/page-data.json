{"componentChunkName":"component---src-components-post-post-page-tsx","path":"/Nodejs-passport-session-ì‚¬ìš©í•˜ê¸°/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"1-ì„œë¡ \" style=\"position:relative;\"><a href=\"#1-%EC%84%9C%EB%A1%A0\" aria-label=\"1 ì„œë¡  permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ì„œë¡ </h1>\n<p>ì§€ë‚œ í¬ìŠ¤íŒ…ê¹Œì§€ express-session, jwtì— ëŒ€í•œ ì´ë¡ ê³¼ ì‹¤ì œ ëª¨ë“ˆ ì‚¬ìš©ê¹Œì§€ ì§„í–‰í•´ë´¤ë‹¤. ì§€ë‚œ í¬ìŠ¤íŒ…ê¹Œì§€ëŠ” login, logoutì— ë³„ë‹¤ë¥¸ ëª¨ë“ˆì„ ì“°ì§€ ì•Šê³  êµ¬í˜„í–ˆì§€ë§Œ ì˜¤ëŠ˜ì€ passport.jsë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„í•´ë³´ë ¤ í•œë‹¤. passport.jsëŠ” OAuth 2.0ì„ ì§€ì›í•˜ëŠ” ëª¨ë“ˆë¡œì¨ ë¡œì»¬ì—ì„œ ë™ì‘í•˜ëŠ” ë¡œê·¸ì¸ë„ ë‹¹ì—°íˆ ì§€ì›í•˜ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ì´ë‹¤. ë•Œë¬¸ì— êµ‰ì¥íˆ ë§ì€ ì‚¬ë‘ì„ ë°›ê³  ìˆëŠ” ë°, í›„ì— í¬ìŠ¤íŒ…í•˜ê²Œ ë  êµ¬ê¸€ ë¡œê·¸ì¸ì˜ ì‹¤ìŠµì„ ì´ ëª¨ë“ˆë¡œ ì§„í–‰í•  ê²ƒì´ê¸° ë•Œë¬¸ì— ë¯¸ë¦¬ ìˆ™ì§€í•  ê²¸, ê·¸ë¦¬ê³  ì´ëŸ° ëª¨ë“ˆë„ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œë¦´ ê²¸í•´ì„œ ì´ í¬ìŠ¤íŒ…ì„ ì‘ì„±í•˜ê²Œ ëë‹¤.</p>\n<h1 id=\"2-í™˜ê²½ì„¤ì •\" style=\"position:relative;\"><a href=\"#2-%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95\" aria-label=\"2 í™˜ê²½ì„¤ì • permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. í™˜ê²½ì„¤ì •</h1>\n<blockquote>\n<p><strong>ì „ì œ ì¡°ê±´</strong> <br/>\nNode.jsëŠ” ë‹¹ì—°íˆ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. <br/>\nMySQLë¡œ DB Sessionì„ êµ¬í˜„í•  ê²ƒì´ë¯€ë¡œ MySQLì„ ì„¤ì¹˜í•˜ê¸° ë°”ë€ë‹¤. <br/>\në‹¹ì—°íˆ MySQLì€ RDSë‚˜ Docker ë“±ì˜ ì›ê²© DBë¡œ ëŒ€ì²´ ê°€ëŠ¥í•˜ë‹¤.</p>\n</blockquote>\n<p>í•˜ì§€ë§Œ MySQLì„ ì‚¬ìš©í•˜ê¸¸ ì›ì¹˜ ì•ŠëŠ” ì‚¬ëŒì´ ìˆë‹¤ë©´, ì´ í¬ìŠ¤íŒ…ì„ ë°©ë¬¸í•´ memory store ë˜ëŠ” file storeë¥¼ ì ìš©í•´ë„ ë¬´ë°©í•˜ë‹¤. ì„¸ì…˜ ë¶€ë¶„ë§Œ ë³€ê²½í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ì–´ë ¤ì›€ ì—†ì´ ëŒ€ì²´ ê°€ëŠ¥í•˜ë‹¤.\nìš°ì„ , ì‹¤ìŠµì„ ì§„í–‰í•  í´ë”ë¥¼ ìƒì„±í•˜ê³  í•„ìš”í•œ ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ì.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># í´ë” ìƒì„± ë° ì—¬ë¦­</span>\n<span class=\"token function\">mkdir</span> passport-practice\n<span class=\"token builtin class-name\">cd</span> passport-practice\n\n<span class=\"token comment\"># package.json ìƒì„±</span>\n<span class=\"token function\">npm</span> init -y\n\n<span class=\"token comment\"># í•„ìš”í•œ ëª¨ë“ˆ ì„¤ì¹˜</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> http express express-session express-mysql-session body-parser passport passport-local</code></pre></div>\n<h1 id=\"3-í´ë”-êµ¬ì¡°\" style=\"position:relative;\"><a href=\"#3-%ED%8F%B4%EB%8D%94-%EA%B5%AC%EC%A1%B0\" aria-label=\"3 í´ë” êµ¬ì¡° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. í´ë” êµ¬ì¡°</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ğŸ“¦passport-practice\n â”£ ğŸ“‚node_modules\n â”£ ğŸ“‚webpage\n â”ƒ â”£ ğŸ“œlogin.html\n â”ƒ â”— ğŸ“œmain.html\n â”£ ğŸ“œindex.js\n â”£ ğŸ“œpackage-lock.json\n â”— ğŸ“œpackage.json</code></pre></div>\n<h1 id=\"4-loginhtml\" style=\"position:relative;\"><a href=\"#4-loginhtml\" aria-label=\"4 loginhtml permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. login.html</h1>\n<p>ê°„ë‹¨í•œ ë¡œê·¸ì¸ í˜ì´ì§€ì´ë‹¤. idì™€ pwë¥¼ ì…ë ¥í•˜ê³  ì œì¶œ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„œë²„ì— ë¡œê·¸ì¸ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- login.html --></span>\n\n<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>login<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POST<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/login<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ì•„ì´ë””<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pw<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ë¹„ë°€ë²ˆí˜¸<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h1 id=\"5-mainhtml\" style=\"position:relative;\"><a href=\"#5-mainhtml\" aria-label=\"5 mainhtml permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. main.html</h1>\n<p>ë¡œê·¸ì¸ì´ ì„±ê³µí–ˆì„ ë•Œ ì¶œë ¥ë˜ëŠ” í˜ì´ì§€ì´ë‹¤. logout ë§í¬ë§Œ ì¡´ì¬í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- main.html --></span>\n\n<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>main<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/logout<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>logout<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h1 id=\"6-indexjs\" style=\"position:relative;\"><a href=\"#6-indexjs\" aria-label=\"6 indexjs permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. index.js</h1>\n<p>íŠ¹ë³„í•œ ì ì´ ìˆë‹¤ë©´ passportë¥¼ app.use(passport.initialize())í•´ì„œ ë°˜ë“œì‹œ ì´ˆê¸°í™”ë¥¼ í•´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤. ë¬¼ë¡  ì„¸ì…˜ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— app.use(passport.session())ë„ ë°˜ë“œì‹œ ì´ˆê¸°í™”í•´ì•¼ í•œë‹¤. ê·¸ ì´í›„ì˜ ì„¤ëª…ì€ ì•„ë˜ì˜ ì½”ë“œì™€ í•¨ê»˜ ì‘ì„±í–ˆë‹¤.\nì²˜ìŒ ê³µë¶€í•˜ëŠ” ì‚¬ëŒì—ê²Œ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ” ì ì´ ìˆë‹¤ë©´, serializeUserì™€ deserializeUserì´ë‹¤. serializeUserë€ ë¡œê·¸ì¸ì„ ì„±ê³µí•œ userì˜ ì •ë³´ë¥¼ sessionì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜ì´ê³ , deserializeUserëŠ” í˜ì´ì§€ì— ë°©ë¬¸í•˜ëŠ” ëª¨ë“  clientì— ëŒ€í•œ ì •ë³´ë¥¼ req.user ë³€ìˆ˜ì— ì „ë‹¬í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤. ë”°ë¼ì„œ, req.userë¡œ í•´ë‹¹ userê°€ ë¡œê·¸ì¸ì„ í•œ ìœ ì €ì¸ì§€ ë˜í•œ ì–´ë–¤ userì¸ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ê°ê°ì˜ ìš”ì²­ë“¤ì—ì„œ ë„˜ê²¨ë°›ì„ ìˆ˜ ìˆê²Œ ëœë‹¤.\nì•„ë˜ì˜ ì½”ë“œì—ì„œëŠ” req.userë¥¼ ì‚¬ìš©í•´ì„œ í•´ë‹¹ ìœ ì €ì˜ ë¡œê·¸ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// index.js</span>\n\n<span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> bodyParser <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"body-parser\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> session <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express-session\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> MySQLStore <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express-mysql-session\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> passport <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"passport\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    LocalStrategy <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"passport-local\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>Strategy<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> <span class=\"token number\">8080</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    host<span class=\"token operator\">:</span> <span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span>\n    port<span class=\"token operator\">:</span> <span class=\"token number\">3306</span><span class=\"token punctuation\">,</span>\n    user<span class=\"token operator\">:</span> <span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span>\n    password<span class=\"token operator\">:</span> <span class=\"token string\">\"1q2w3e4r!@\"</span><span class=\"token punctuation\">,</span>\n    database<span class=\"token operator\">:</span> <span class=\"token string\">\"session_test\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> sessionStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MySQLStore</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">session</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        secret<span class=\"token operator\">:</span> <span class=\"token string\">\"secret key\"</span><span class=\"token punctuation\">,</span>\n        store<span class=\"token operator\">:</span> sessionStore<span class=\"token punctuation\">,</span>\n        resave<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        saveUninitialized<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>bodyParser<span class=\"token punctuation\">.</span><span class=\"token function\">urlencoded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> extended<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// passport ì´ˆê¸°í™” ë° session ì—°ê²°</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>passport<span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>passport<span class=\"token punctuation\">.</span><span class=\"token function\">session</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// loginì´ ìµœì´ˆë¡œ ì„±ê³µí–ˆì„ ë•Œë§Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜</span>\n<span class=\"token comment\">// done(null, user.id)ë¡œ ì„¸ì…˜ì„ ì´ˆê¸°í™” í•œë‹¤.</span>\npassport<span class=\"token punctuation\">.</span><span class=\"token function\">serializeUser</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">user<span class=\"token punctuation\">,</span> done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë°©ë¬¸í•  ë•Œë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜</span>\n<span class=\"token comment\">// done(null, id)ë¡œ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ê° requestì˜ user ë³€ìˆ˜ì— ë„£ì–´ì¤€ë‹¤.</span>\npassport<span class=\"token punctuation\">.</span><span class=\"token function\">deserializeUser</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ì„ì‹œ id, pw ë°°ì—´</span>\n<span class=\"token keyword\">const</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> pw<span class=\"token operator\">:</span> <span class=\"token string\">\"world\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">\"good\"</span><span class=\"token punctuation\">,</span> pw<span class=\"token operator\">:</span> <span class=\"token string\">\"bye\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ì…ë ¥ëœ idê°€ ì¡´ì¬í•˜ëŠ” ì§€ ì—¬ë¶€ì™€ ìœ„ì¹˜ ë°˜í™˜ í•¨ìˆ˜</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findIndexByID</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> len <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// id, pw login í•¨ìˆ˜</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">login</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> pw</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token function\">findIndexByID</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>pw <span class=\"token operator\">===</span> pw<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// local login ì „ëµì„ ì„¸ìš°ëŠ” í•¨ìˆ˜</span>\n<span class=\"token comment\">// clientì—ì„œ ì „ì†¡ë˜ëŠ” ë³€ìˆ˜ì˜ ì´ë¦„ì´ ê°ê° id, pwì´ë¯€ë¡œ</span>\n<span class=\"token comment\">// usernameField, passwordFieldì—ì„œ í•´ë‹¹ ë³€ìˆ˜ì˜ ê°’ì„ ë°›ìŒ</span>\n<span class=\"token comment\">// ì´í›„ë¶€í„°ëŠ” username, passwordì— ê°ê° ì „ì†¡ë°›ì€ ê°’ì´ ì „ë‹¬ë¨</span>\n<span class=\"token comment\">// ìœ„ì—ì„œ ë§Œë“  login í•¨ìˆ˜ë¡œ id, pwê°€ ìœ íš¨í•œì§€ ê²€ì¶œ</span>\n<span class=\"token comment\">// ì—¬ê¸°ì„œ ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ ìœ„ì˜ passport.serializeUser í•¨ìˆ˜ë¡œ ì´ë™</span>\npassport<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">LocalStrategy</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">{</span>\n            usernameField<span class=\"token operator\">:</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span>\n            passwordField<span class=\"token operator\">:</span> <span class=\"token string\">\"pw\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">username<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">,</span> done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">return</span> <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> message<span class=\"token operator\">:</span> <span class=\"token string\">\"Incorrect username.\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">return</span> <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> message<span class=\"token operator\">:</span> <span class=\"token string\">\"Incorrect password.\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">else</span> <span class=\"token keyword\">return</span> <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> username <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// login ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ ì„±ê³µì‹œ / ë¡œ, ì‹¤íŒ¨ì‹œ /login ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">,</span>\n    passport<span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"local\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        successRedirect<span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n        failureRedirect<span class=\"token operator\">:</span> <span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// login í˜ì´ì§€</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./webpage/login.html\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;h1>500 error&lt;/h1>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">writeHead</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text/html\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// main í˜ì´ì§€</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./webpage/main.html\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;h1>500 error&lt;/h1>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">writeHead</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text/html\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// logout</span>\n<span class=\"token comment\">// passportì˜ ë‚´ì¥í•¨ìˆ˜ì¸ logout() í˜¸ì¶œ</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/logout\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    req<span class=\"token punctuation\">.</span><span class=\"token function\">logout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Server running on </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">PORT</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1 id=\"ì°¸ê³ \" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"ì°¸ê³  permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[ì°¸ê³ ]</h1>\n<ul>\n<li><a href=\"http://www.passportjs.org/docs/\">http://www.passportjs.org/docs/</a></li>\n</ul>","id":"885e2a02-9ad0-50f9-92e2-df413d8abb83","tableOfContents":"<ul>\n<li><a href=\"#1-%EC%84%9C%EB%A1%A0\">1. ì„œë¡ </a></li>\n<li><a href=\"#2-%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95\">2. í™˜ê²½ì„¤ì •</a></li>\n<li><a href=\"#3-%ED%8F%B4%EB%8D%94-%EA%B5%AC%EC%A1%B0\">3. í´ë” êµ¬ì¡°</a></li>\n<li><a href=\"#4-loginhtml\">4. login.html</a></li>\n<li><a href=\"#5-mainhtml\">5. main.html</a></li>\n<li><a href=\"#6-indexjs\">6. index.js</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">ì°¸ê³ </a></li>\n</ul>","frontmatter":{"author":"millo","description":"nodejsì—ì„œ passport ëª¨ë“ˆì˜ sessionì„ ì‚¬ìš©í•œ ì¸ì¦ ë°©ì‹ì„ êµ¬í˜„í•´ë³´ì.","category":"nodejs","released_at":"2021-02-01","updated_at":null,"tags":["Authentication","nodejs","passport","passport session","session"],"title":"[Node.js] passport session ì‚¬ìš©í•˜ê¸°","lang":"ko","series":"Authentication ë°©ì‹ ì •ë¦¬í•˜ê¸°","translation":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAc0lEQVQoz82RQQqAIBBF1QkZNEIIIaV1kLtu5Cm6/k9cugqKcvFgYODx4AshBF7mA6GUvReu2wh2jIEGEFFTL6GUui+cLCOfGXPaMTJjCQGhEGOE977inLsv1FojpaPcVGu4SK21FWNM/bfVf6wsO1/5CRciyOBPRzlw9gAAAABJRU5ErkJggg==","aspectRatio":1.834862385321101,"src":"/static/6c24223aba7de2df3ba2e51c77b665bc/ee604/passport.png","srcSet":"/static/6c24223aba7de2df3ba2e51c77b665bc/69585/passport.png 200w,\n/static/6c24223aba7de2df3ba2e51c77b665bc/497c6/passport.png 400w,\n/static/6c24223aba7de2df3ba2e51c77b665bc/ee604/passport.png 800w,\n/static/6c24223aba7de2df3ba2e51c77b665bc/f3583/passport.png 1200w,\n/static/6c24223aba7de2df3ba2e51c77b665bc/e7b05/passport.png 1432w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"fields":{"slug":"/Nodejs-passport-session-ì‚¬ìš©í•˜ê¸°/"}},"site":{"siteMetadata":{"siteUrl":"https://millo-L.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"Session ê¸°ë°˜ ì¸ì¦ ë°©ì‹","lang":"ko"},"fields":{"slug":"/Session-ê¸°ë°˜-ì¸ì¦ë°©ì‹/"}}},{"node":{"frontmatter":{"title":"JWT ê¸°ë°˜ ì¸ì¦ ë°©ì‹","lang":"ko"},"fields":{"slug":"/JWT-ê¸°ë°˜-ì¸ì¦ë°©ì‹/"}}},{"node":{"frontmatter":{"title":"[Node.js] express session ì‚¬ìš©í•˜ê¸°","lang":"ko"},"fields":{"slug":"/Nodejs-express-session-ì‚¬ìš©í•˜ê¸°/"}}},{"node":{"frontmatter":{"title":"[Node.js] JWT ì‚¬ìš©í•˜ê¸°","lang":"ko"},"fields":{"slug":"/Nodejs-JWT-ì‚¬ìš©í•˜ê¸°/"}}},{"node":{"frontmatter":{"title":"[Node.js] passport session ì‚¬ìš©í•˜ê¸°","lang":"ko"},"fields":{"slug":"/Nodejs-passport-session-ì‚¬ìš©í•˜ê¸°/"}}},{"node":{"frontmatter":{"title":"OAuth 2.0 ê¸°ë°˜ ì¸ì¦ ë°©ì‹","lang":"ko"},"fields":{"slug":"/OAuth2-ê¸°ë°˜-ì¸ì¦ë°©ì‹/"}}},{"node":{"frontmatter":{"title":"[Node.js] passport Google OAuth 2.0 ë¡œê·¸ì¸ ì‚¬ìš©í•˜ê¸°","lang":"ko"},"fields":{"slug":"/Nodejs-passport-Google-OAuth-2-ë¡œê·¸ì¸-ì‚¬ìš©í•˜ê¸°/"}}}]}},"pageContext":{"slug":"/Nodejs-passport-session-ì‚¬ìš©í•˜ê¸°/","series":"Authentication ë°©ì‹ ì •ë¦¬í•˜ê¸°"}},"staticQueryHashes":["1608878238","3469517283","764694655"]}