{"componentChunkName":"component---src-components-post-post-page-tsx","path":"/Typescript-mongodb-method-statics-사용하기/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"1-서론\" style=\"position:relative;\"><a href=\"#1-%EC%84%9C%EB%A1%A0\" aria-label=\"1 서론 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 서론</h1>\n<p>typescript 환경에서 mongoose 모듈을 사용하여 methods와 statics를 사용할 상황이 생겼는 데, nodejs에서는 바로 실행되던 부분이 typescript에서는 조금 더 까다롭게 설정이 되서 포스팅을 적는다. typescript 자체가 워낙 자료형에 민감하기 때문에 더욱 그런 것 같다. 그 덕분에 코드 리뷰나 협업에서는 편리함을 느끼지만 간혹 이렇게 불편함이 생길 때가 있는 것 같다.</p>\n<h1 id=\"2-코드\" style=\"position:relative;\"><a href=\"#2-%EC%BD%94%EB%93%9C\" aria-label=\"2 코드 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 코드</h1>\n<h2 id=\"2-1-전체-코드\" style=\"position:relative;\"><a href=\"#2-1-%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C\" aria-label=\"2 1 전체 코드 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. 전체 코드</h2>\n<p>우선 전체 코드를 보도록 하자. <br />\n큰 틀을 보자면 User라는 mongodb의 모델이 사용할 변수와 methods, statics 들의 자료형을 interface를 통해서 명시하고 해당 interface를 포함하는 model을 생성한다. 자세한 사항은 아래에서 차근차근 진행하도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// user.ts</span>\n\n<span class=\"token keyword\">import</span> mongoose<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Schema<span class=\"token punctuation\">,</span> Document<span class=\"token punctuation\">,</span> Model <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mongoose\"</span>\n<span class=\"token keyword\">import</span> bcrypt <span class=\"token keyword\">from</span> <span class=\"token string\">\"bcrypt\"</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">IUser</span> <span class=\"token punctuation\">{</span>\n    username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n    hashedPassword<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">IUserDocument</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">IUser</span><span class=\"token punctuation\">,</span> Document <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">setPassword</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span>\n    <span class=\"token function-variable function\">checkPassword</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">boolean</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">IUserModel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model<span class=\"token operator\">&lt;</span>IUserDocument<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">findByUsername</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>IUserDocument<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> UserSchema<span class=\"token operator\">:</span> Schema<span class=\"token operator\">&lt;</span>IUserDocument<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Schema</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    username<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">type</span><span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    hashedPassword<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">type</span><span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nUserSchema<span class=\"token punctuation\">.</span>methods<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">setPassword</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> bcrypt<span class=\"token punctuation\">.</span><span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>hashedPassword <span class=\"token operator\">=</span> hash\n<span class=\"token punctuation\">}</span>\n\nUserSchema<span class=\"token punctuation\">.</span>methods<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">checkPassword</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> bcrypt<span class=\"token punctuation\">.</span><span class=\"token function\">compare</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>hashedPassword<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">}</span>\n\nUserSchema<span class=\"token punctuation\">.</span>statics<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">findByUsername</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> username <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> User <span class=\"token operator\">=</span> mongoose<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">model</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>IUserDocument<span class=\"token punctuation\">,</span> IUserModel<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"User\"</span><span class=\"token punctuation\">,</span> UserSchema<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> User</code></pre></div>\n<h2 id=\"2-2-모델에서-사용할-변수-interface\" style=\"position:relative;\"><a href=\"#2-2-%EB%AA%A8%EB%8D%B8%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%B3%80%EC%88%98-interface\" aria-label=\"2 2 모델에서 사용할 변수 interface permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2. 모델에서 사용할 변수 interface</h2>\n<p>아래의 interface는 User 모델에서 사용할 변수들의 이름과 자료형을 명시하는 역할을 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">IUser</span> <span class=\"token punctuation\">{</span>\n    username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n    hashedPassword<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"-잠깐-methods와-statics의-차이점\" style=\"position:relative;\"><a href=\"#-%EC%9E%A0%EA%B9%90-methods%EC%99%80-statics%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\" 잠깐 methods와 statics의 차이점 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[👋 잠깐] methods와 statics의 차이점</h2>\n<p>methods를 사용할 때는 이 <span style=\"color:red\">method를 호출한 객체가 method 내에서의 this가 되고</span>,<br /> statics를 사용할 때는 이 <span style=\"color:red\">statics를 호출한 객체에 상관없이 this가 모델 자체가 된다.</span></p>\n<h3>methods</h3>\n<p>따라서, 위의 코드에서 setPassword와 checkPassword는 한 객체에 대해서 각각 해당 객체에 비밀번호를 설정하거나 해당 객체의 비밀번호와 일치하는 지 여부를 확인할 수 있다.</p>\n<h3>statics</h3>\n<p>반면, findByUsername은 Model 내에서 해당 username인 User를 반환할 수 있다.</p>\n<h2 id=\"2-3-모델에서-사용할-methods-interface\" style=\"position:relative;\"><a href=\"#2-3-%EB%AA%A8%EB%8D%B8%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-methods-interface\" aria-label=\"2 3 모델에서 사용할 methods interface permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-3. 모델에서 사용할 methods interface</h2>\n<p>아래의 interface는 User 모델에서 사용할 변수에 덧붙여 methods의 이름과 자료형을 명시하는 역할을 한다. <br />\n다만, 위의 interface와 다른 점은 IUser 뿐만 아니라 <span style=\"color:red\">mongoose의 class 인 <strong>Document</strong>도 extends 한다는 점이다.</span> <br />\n이후 해당 interface를 토대로 mongoose Schema를 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">IUserDocument</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">IUser</span><span class=\"token punctuation\">,</span> Document <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">setPassword</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span>\n    <span class=\"token function-variable function\">checkPassword</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">boolean</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> UserSchema<span class=\"token operator\">:</span> Schema<span class=\"token operator\">&lt;</span>IUserDocument<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Schema</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    username<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">type</span><span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    hashedPassword<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">type</span><span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nUserSchema<span class=\"token punctuation\">.</span>methods<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">setPassword</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> bcrypt<span class=\"token punctuation\">.</span><span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>hashedPassword <span class=\"token operator\">=</span> hash\n<span class=\"token punctuation\">}</span>\n\nUserSchema<span class=\"token punctuation\">.</span>methods<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">checkPassword</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> bcrypt<span class=\"token punctuation\">.</span><span class=\"token function\">compare</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>hashedPassword<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"2-4-모델에서-사용할-statics-interface\" style=\"position:relative;\"><a href=\"#2-4-%EB%AA%A8%EB%8D%B8%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-statics-interface\" aria-label=\"2 4 모델에서 사용할 statics interface permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-4. 모델에서 사용할 statics interface</h2>\n<p>아래의 interface는 위의 변수와 methods 그리고 mongoose의 Document class를 포함한 interface를 Model 형태로 extends하고 User 모델에서 사용할 statics를 명시하는 역할을 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">IUserModel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model<span class=\"token operator\">&lt;</span>IUserDocument<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">findByUsername</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>IUserDocument<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\nUserSchema<span class=\"token punctuation\">.</span>statics<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">findByUsername</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> username <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"2-5-user-모델-선언\" style=\"position:relative;\"><a href=\"#2-5-user-%EB%AA%A8%EB%8D%B8-%EC%84%A0%EC%96%B8\" aria-label=\"2 5 user 모델 선언 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-5. User 모델 선언</h2>\n<p>위에서 만든 IUserDocument(변수 + methods의 interface)와 statics 까지 포함한 interface를 기반으로 User model을 선언한다. 이 후 해당 model을 import하면 위의 변수, methods, statics 기능을 모두 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> User <span class=\"token operator\">=</span> mongoose<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">model</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>IUserDocument<span class=\"token punctuation\">,</span> IUserModel<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"User\"</span><span class=\"token punctuation\">,</span> UserSchema<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> User</code></pre></div>\n<h2 id=\"2-5-user-model-declaration\" style=\"position:relative;\"><a href=\"#2-5-user-model-declaration\" aria-label=\"2 5 user model declaration permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-5. User Model Declaration</h2>\n<p>The user model is declared based on the interface including the IUserDocument (the interface of the variables + methods) and statics created above. The above variables, methods, and statics functions are all available when the model is then imported.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">IUserModel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model<span class=\"token operator\">&lt;</span>IUserDocument<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">findByUsername</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>IUserDocument<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\nUserSchema<span class=\"token punctuation\">.</span>statics<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">findByUsername</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> username <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","id":"4f474ac9-b2e3-5850-b2d8-f5e08071c3e1","tableOfContents":"<ul>\n<li><a href=\"#1-%EC%84%9C%EB%A1%A0\">1. 서론</a></li>\n<li>\n<p><a href=\"#2-%EC%BD%94%EB%93%9C\">2. 코드</a></p>\n<ul>\n<li><a href=\"#2-1-%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C\">2-1. 전체 코드</a></li>\n<li><a href=\"#2-2-%EB%AA%A8%EB%8D%B8%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%B3%80%EC%88%98-interface\">2-2. 모델에서 사용할 변수 interface</a></li>\n<li><a href=\"#-%EC%9E%A0%EA%B9%90-methods%EC%99%80-statics%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\">👋 잠깐 methods와 statics의 차이점</a></li>\n<li><a href=\"#2-3-%EB%AA%A8%EB%8D%B8%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-methods-interface\">2-3. 모델에서 사용할 methods interface</a></li>\n<li><a href=\"#2-4-%EB%AA%A8%EB%8D%B8%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-statics-interface\">2-4. 모델에서 사용할 statics interface</a></li>\n<li><a href=\"#2-5-user-%EB%AA%A8%EB%8D%B8-%EC%84%A0%EC%96%B8\">2-5. User 모델 선언</a></li>\n<li><a href=\"#2-5-user-model-declaration\">2-5. User Model Declaration</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"author":"millo","description":"typescript 환경에서 mongoose의 methods와 statics를 사용해보자.","category":"typescript","released_at":"2021-03-02","updated_at":null,"tags":["typescript","nodejs","mongodb","mongoose","statics","methods"],"title":"[Typescript] mongoose methods, statics 사용하기","lang":"ko","series":"none","translation":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABeUlEQVQoz2NgqDpLPgJilppzzNXnMOWYa84xVSO4jHBGNZJmhtLTDOVngHLMYFGgBqA0E1C87DRDxRkQF6wBQVacgWoWar4Qv+qu+7xbTBBTgBLlILOAyGbGdevp1xnKzgAFGcvPKHZdgojzNZyHuggoF7zkTsqae6LNFyKW3glbesds6jXPeTcDFt3O3fhApPmC1fRrEcvuBC66BbQjZMlt/0W32vc9Veq+DDIIaJvz7Jupa+8lr7lXsOmhWu+Vqceet+57AjRFqftS894nUcvvGky65rfwVv+h5y5zboQuvVOz8wlr7TmGSqDm8jMafVfsZ15PXXPPb8HtvE0PrKZfD11622jyVbe5NwMX3/aYfzN25R3ZzotA06u2P3SYdcN7wS1liM2goCs5DfSeQuclnQlXge4EckFBUgkO3jKQJ5kqQWoUOi5p9F0GyZaDZKGhDQ7bMyANYD2Q0IaEJ4QND2eGChRZBqgisDpIrOBKEozI2pA1k4cAtic4mt2usZcAAAAASUVORK5CYII=","aspectRatio":1.9047619047619047,"src":"/static/a02102f27ded84e8f475f22fcbf0a56a/151a9/typescript.png","srcSet":"/static/a02102f27ded84e8f475f22fcbf0a56a/69585/typescript.png 200w,\n/static/a02102f27ded84e8f475f22fcbf0a56a/151a9/typescript.png 310w","sizes":"(max-width: 310px) 100vw, 310px"}}}},"fields":{"slug":"/Typescript-mongodb-method-statics-사용하기/"}},"site":{"siteMetadata":{"siteUrl":"https://millo-L.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"[Docker] docker-compose (node.js, mysql) 실행 순서 동기화","lang":"ko"},"fields":{"slug":"/docket-compose-(nodejs-mysql)-실행-순서-동기화/"}}},{"node":{"frontmatter":{"title":"[JavaScript] Callback 지옥 벗어나기","lang":"ko"},"fields":{"slug":"/JavaScript-Callback-지옥-벗어나기/"}}},{"node":{"frontmatter":{"title":"[Docker] Jenkins in Docker(Ubuntu18.04)","lang":"ko"},"fields":{"slug":"/Jenkins-in-Docker-Ubuntu18.04/"}}},{"node":{"frontmatter":{"title":"[Go] 구조체를 Class처럼 사용하기","lang":"ko"},"fields":{"slug":"/Go언어에서-구조체를-Class처럼-사용하기/"}}},{"node":{"frontmatter":{"title":"[Raspberry pi] OpenCV4 설치하기","lang":"ko"},"fields":{"slug":"/Raspberry-pi에-OpenCV4-설치하기/"}}},{"node":{"frontmatter":{"title":"[Python] 간단한 Anaconda 가상 환경 관리하기","lang":"ko"},"fields":{"slug":"/Python-간단한-Anaconda-가상-환경-관리하기/"}}},{"node":{"frontmatter":{"title":"[Python] TCP image socket 구현하기(Server, Client)","lang":"ko"},"fields":{"slug":"/Python-TCP-image-socket-구현하기-Server-Client/"}}},{"node":{"frontmatter":{"title":"[Node.js] express 사용하기","lang":"ko"},"fields":{"slug":"/Nodejs-express-사용하기/"}}},{"node":{"frontmatter":{"title":"[Node.js] express router 사용하기","lang":"ko"},"fields":{"slug":"/Nodejs-express-router-사용하기/"}}},{"node":{"frontmatter":{"title":"[Raspberry pi] 부팅 시 프로그램 자동 실행하기","lang":"ko"},"fields":{"slug":"/Raspberry-pi-부팅시-프로그램-자동-실행하기/"}}},{"node":{"frontmatter":{"title":"[Node.js] moment 사용하기","lang":"ko"},"fields":{"slug":"/Nodejs-moment-사용하기/"}}},{"node":{"frontmatter":{"title":"[Docker] Ubuntu:18.04에서 Docker 설치하기","lang":"ko"},"fields":{"slug":"/Ubuntu-18.04에서-Docker-설치하기/"}}},{"node":{"frontmatter":{"title":"[NGINX] Ubuntu:18.04에서 letsencrypt HTTPS 환경 구축하기","lang":"ko"},"fields":{"slug":"/Ubuntu-18.04에서-letsencrypt-HTTPS-환경구축/"}}},{"node":{"frontmatter":{"title":"[Node.js] nodemailer 사용하기","lang":"ko"},"fields":{"slug":"/Nodejs-nodemailer-사용하기/"}}},{"node":{"frontmatter":{"title":"[Node.js] mysql을 async/await로 처리하기","lang":"ko"},"fields":{"slug":"/Nodejs-mysql을-async-awiat로-처리하기/"}}},{"node":{"frontmatter":{"title":"[Node.js] express cors 사용하기","lang":"ko"},"fields":{"slug":"/Nodejs-express-cors-사용하기/"}}},{"node":{"frontmatter":{"title":"[Node.js] express static folder 지정하기","lang":"ko"},"fields":{"slug":"/Nodejs-express-static-folder-지정하기/"}}},{"node":{"frontmatter":{"title":"[JavaScript] Date 객체 사용하기","lang":"ko"},"fields":{"slug":"/JavaScript-Date-객체-사용하기/"}}},{"node":{"frontmatter":{"title":"[Docker] ReactJS Dockerizing하기","lang":"ko"},"fields":{"slug":"/React-Dockerizing하기/"}}},{"node":{"frontmatter":{"title":"[React Native] 배경 이미지 크기 자동으로 맞추기","lang":"ko"},"fields":{"slug":"/ReactNative-배경-이미지-크기-자동으로-맞추기/"}}},{"node":{"frontmatter":{"title":"[React Native] 커스텀 로딩 애니메이션 스크린 구현하기","lang":"ko"},"fields":{"slug":"/ReactNative-커스텀-로딩-애니메이션-스크린-구현하기/"}}},{"node":{"frontmatter":{"title":"[Node.js] Socket.io 간단한 채팅 구현하기","lang":"ko"},"fields":{"slug":"/Nodejs-socket.io-간단한-채팅-구현하기/"}}},{"node":{"frontmatter":{"title":"[Python] Ubuntu:18.04 에서 jupyter notebook 사용하기","lang":"ko"},"fields":{"slug":"/Python-Ubuntu18.04에서-jupyter-notebook-사용하기/"}}},{"node":{"frontmatter":{"title":"[Network] HTTP 상태(응답) 코드 정리하기","lang":"ko"},"fields":{"slug":"/HTTP-상태코드-정리하기/"}}},{"node":{"frontmatter":{"title":"[Network] SOAP 정리하기","lang":"ko"},"fields":{"slug":"/SOAP-정리하기/"}}},{"node":{"frontmatter":{"title":"[Node.js] slack 연동하기(알림봇 구현)","lang":"ko"},"fields":{"slug":"/Nodejs-slack-연동하기-알림봇구현/"}}},{"node":{"frontmatter":{"title":"[React Native] Dimensions.get('window')와 Dimensions.get('screen')의 차이점","lang":"ko"},"fields":{"slug":"/ReactNative-Dimensions.get-window와-Dimentsions.get-screen의-차이점/"}}},{"node":{"frontmatter":{"title":"[React Native] Bottom tab bar 특정 화면에서 안 보이게 설정하기","lang":"ko"},"fields":{"slug":"/ReactNative-Bottom-tab-bar-특정-화면에서-안-보이게-설정하기/"}}},{"node":{"frontmatter":{"title":"[React Native] 특정 화면에서 화면 고정하기","lang":"ko"},"fields":{"slug":"/ReactNative-특정-화면에서-화면-고정하기/"}}},{"node":{"frontmatter":{"title":"[Node.js] PBKDF2 비밀번호 암호화하기","lang":"ko"},"fields":{"slug":"/Nodejs-PBKDF2-비밀번호-암호화하기/"}}},{"node":{"frontmatter":{"title":"[Network] HTTP란 무엇인가","lang":"ko"},"fields":{"slug":"/HTTP란-무엇인가/"}}},{"node":{"frontmatter":{"title":"[Network] URI와 URL의 차이점","lang":"ko"},"fields":{"slug":"/URI와-URL의-차이점/"}}},{"node":{"frontmatter":{"title":"[Gatsby] document is not defined build error 해결 방법","lang":"ko"},"fields":{"slug":"/Gatsby-build-error-document-is-not-defined-해결방법/"}}},{"node":{"frontmatter":{"title":"[Gatsby] Troubleshooting document is not defined build error","lang":"en"},"fields":{"slug":"/Troubleshooting-Gatsby-build-error-document-is-not-defined/"}}},{"node":{"frontmatter":{"title":"[Typescript] mongoose methods, statics 사용하기","lang":"ko"},"fields":{"slug":"/Typescript-mongodb-method-statics-사용하기/"}}},{"node":{"frontmatter":{"title":"[Typescript] mongoose methods, statics","lang":"en"},"fields":{"slug":"/Typescript-mongoose-methods-statics/"}}},{"node":{"frontmatter":{"title":"[Network] Differences between URI and URL","lang":"en"},"fields":{"slug":"/Difference-between-URI-and-URL/"}}},{"node":{"frontmatter":{"title":"[Docker] Synchronize docker-compose (node.js, mysql) execution order","lang":"en"},"fields":{"slug":"/Synchronize-docker-compose-(node.js-mysql)-execution-order/"}}},{"node":{"frontmatter":{"title":"[JavaScript] Get out of Callback hell","lang":"en"},"fields":{"slug":"/JavaScript-Get-out-of-Callback-hell/"}}},{"node":{"frontmatter":{"title":"[Docker] Jenkins in Docker(Ubuntu18.04)","lang":"en"},"fields":{"slug":"/jenkins-in-docker-ubuntu/"}}},{"node":{"frontmatter":{"title":"[Go] Using Struct as Class","lang":"en"},"fields":{"slug":"/Using-struct-as-class-in-golang/"}}}]}},"pageContext":{"slug":"/Typescript-mongodb-method-statics-사용하기/","series":"none"}},"staticQueryHashes":["1608878238","3469517283","764694655"]}