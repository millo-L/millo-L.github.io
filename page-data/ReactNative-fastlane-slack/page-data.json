{"componentChunkName":"component---src-components-post-post-template-tsx","path":"/ReactNative-fastlane-slack/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"1-서론\" style=\"position:relative;\"><a href=\"#1-%EC%84%9C%EB%A1%A0\" aria-label=\"1 서론 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 서론</h2>\n<p>Fastlane을 사용해서 배포 자동화를 수행하게 되면 React Native를 매우 수월하게 각각의 스토어(App Store, Play Store)에 배포할 수 있다. 로컬 환경에서 Fastlane을 구동하게 되면 배포 과정이 어느 정도 진행됐는 지를 터미널에 찍히는 로그들로 알 수 있지만, 원격 서버에서 Fastlane을 사용하게 되면 진행 상황에 대한 정보를 얻기가 쉽지 않다. 이를 위해서는 Slack 또는 이메일 연동을 진행해야 하는 데, 이미 사내에서 쓰고 있는 Slack을 선택하게 됐다.</p>\n<h2 id=\"2-방법\" style=\"position:relative;\"><a href=\"#2-%EB%B0%A9%EB%B2%95\" aria-label=\"2 방법 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 방법</h2>\n<p>방법은 매우 간단하다. Slack에서 원하는 채널을 선택해서 Webhook을 설정하고, 해당 url을 통해서 요청을 보내면 해당 메세지가 전달되는 방식이다.</p>\n<p><a href=\"https://my.slack.com/services/new/incoming-webhook/\">https://my.slack.com/services/new/incoming-webhook/</a> 에 들어가서 아래의 설정을 시작한다.</p>\n<h3 id=\"2-1-slack-webhook-설정\" style=\"position:relative;\"><a href=\"#2-1-slack-webhook-%EC%84%A4%EC%A0%95\" aria-label=\"2 1 slack webhook 설정 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. Slack Webhook 설정</h3>\n<p>위의 url로 접근하면 이런 페이지가 나온다. 원하는 채널을 선택하고 <code class=\"language-text\">Add Incomming WebHooks integration</code>버튼을 누른다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ab5dbbcfce6394bdbb5ea1f23c34aabd/f09ab/fastlane-slack-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.53435114503817%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACNElEQVR42nVTSXLbMBDUO3N28qCcEn8ghzjPyBPiqhwsUaQkStxXAFw70+BiLQ6rujAAgUZPz2CTJDFeX//A8zyLMAyhtUJR5EiTBEkcS1ygVgp1XUPNY5ZliKIIWZriKByef0JZlNi0TYOqqpBVCrmgUgaFalDrBllZI8wqVLWGEhIStW1r0cg5Y8w0CrTWdn3DoJEgPJ1xOp3g7Pd42+7gHQ7QckCb6UBzh4XYkss+kpNrIpQNh72L7XaLnePAIXaOTT8IAlwuZ8EF5/M0co0x/3NOS8xMullkZ3kO3/fhBzHSLEcuc/qUikf0akEivnItFm+XmL7eEBIXuXXn7CXVoy3OQVJm2q7r2tjOZZ2KSESQlJeUZbl6uir0gwinS4Q0L211l81Ma1I3za2yeFJGkJjFulIoFeJCEtoW4KFADmupctd1q/Fd195U+Loo3PdOyJKXBdpEiMJIUpR0/QBxIn1GlWmBUBClmVW3KF/85Hwhe/dQKm1ULf1WWz96uXEcR/R9j34Y0fWDoF/RzxiGwY5U+VBl+nA8Hm0RqKyuFUY5YKSCwo77bxh6i77vLOlDlZvGWPlUSKWd3Kpag7fQh5MEcNMIe/GZsZdFULKfr6k27SMhm5uL46xkmMffzl98+vEVX3494/PLd4unn9/w9PIMN0uscFrCs/ojQn4kXYi5xqbl09JKT15rPkdR33QWKyH/Xae8eHn/XpfWuWmhK7RzQz94+D/w5g9hOJo11YXwH9KRyOxFqqcLAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fastlane slack 1\"\n        title=\"\"\n        src=\"/static/ab5dbbcfce6394bdbb5ea1f23c34aabd/1c1a4/fastlane-slack-1.png\"\n        srcset=\"/static/ab5dbbcfce6394bdbb5ea1f23c34aabd/8ff13/fastlane-slack-1.png 262w,\n/static/ab5dbbcfce6394bdbb5ea1f23c34aabd/3e286/fastlane-slack-1.png 523w,\n/static/ab5dbbcfce6394bdbb5ea1f23c34aabd/1c1a4/fastlane-slack-1.png 1046w,\n/static/ab5dbbcfce6394bdbb5ea1f23c34aabd/f09ab/fastlane-slack-1.png 1250w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이 페이지에서는 Webhook 요청에 대한 설명들이 나와있다. 쭉 읽어봐도 좋지만, Fastlane에서는 이미 Slack 형식에 맞게 함수가 준비되어 있으므로 우리는 아래의 Webhook URL만을 복사해두고 <code class=\"language-text\">Save Settings</code>버튼을 누르도록 하자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1046px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2d7b324820f20d9fa6f5e47a93ad333c/5a791/fastlane-slack-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.65648854961832%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACAklEQVR42o1UW47TQBDMqdGeaDkAi9B+cQLgC1gp2kQkCokdvx9jj1/FVNtjDXYixVKlHbunu7q72hulSux2O4RhCN/3UZYleGmtoZQSNE2Dvu8FwzCIresaRVFAGxuUBaI0Qdd12OiqQp7nqIzlQaJtW7E8RDC4fWfB5zwz+mhDRMn9hj8MkKYpTqeTsLxer8Lk0Yu+NvmGWRgwCAJst1scj0ckSTKXSva23CUGWlOmbcHM0JbE4KUJxD7SiT3hO9ol6F9UGrnSaM3/VUAZgglE+3ipQE+4DMeSG4RRgu3ugMNfD1lezKzZWyLLMrFsBxEbBGEktlsyJHqTasw4TPfDXLYL9lta0bTISqMQVZv/ix5KP0zzPc+T4VjdMegyoH3uqmA1FAloRMqAvn8V6bBEOrIlVm+0NugyyWootAxCmdDpltasvYX/hkKGbPThz0HETba87HMOg717SNiWIQ9Y6zJxd9gN4GIlGzKJ4xj7/R6Xy0VKp6NWlRlWIW2gM7eH98u1vMlw/hhU41dEAk6D0Oad3Y5RYv19hu6U+VEg7FDozBbU0ybx4JLZ3ZJZ5vl8FlCLHVkYwZZhjDJOERk5RVEke87kBBPfZEi4Yu0mJl/ff+LDl2c8vX7E57cf8qyddOcOatVDws1mS34PPLz8/o5Pv77hzT/NW7FUgLvL/wBhfcnQRSq+UAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fastlane slack 2\"\n        title=\"\"\n        src=\"/static/2d7b324820f20d9fa6f5e47a93ad333c/1c1a4/fastlane-slack-2.png\"\n        srcset=\"/static/2d7b324820f20d9fa6f5e47a93ad333c/8ff13/fastlane-slack-2.png 262w,\n/static/2d7b324820f20d9fa6f5e47a93ad333c/3e286/fastlane-slack-2.png 523w,\n/static/2d7b324820f20d9fa6f5e47a93ad333c/1c1a4/fastlane-slack-2.png 1046w,\n/static/2d7b324820f20d9fa6f5e47a93ad333c/5a791/fastlane-slack-2.png 1248w\"\n        sizes=\"(max-width: 1046px) 100vw, 1046px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"2-2-fastlane에-적용\" style=\"position:relative;\"><a href=\"#2-2-fastlane%EC%97%90-%EC%A0%81%EC%9A%A9\" aria-label=\"2 2 fastlane에 적용 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2. Fastlane에 적용</h3>\n<p>적용하는 방식은 iOS와 Android 모두에서 동일하므로 지난 번 포스팅에서 만든 iOS용 Fastfile에 적용해보도록 하겠다.</p>\n<h4>1. before_all 처리</h4>\n<p>before_all 전처리 함수를 통해서 모든 단계 시작 전 환경변수로 아까 복사해둔 Webhook URL을 설정해둔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">  before_all <span class=\"token keyword\">do</span>\n    <span class=\"token constant\">ENV</span><span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">\"SLACK_URL\"</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"https://hooks.slack.com/services/your/url\"</span></span>\n  <span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h4>2. after_all 처리</h4>\n<p>after_all 후처리 함수를 통해서 모든 단계가 종료된 후 Slack으로 메세지를 보낸다. messge 부분에 알림 받고 싶은 메세지를 작성하면 된다. slack 함수의 성공 여부는 default가 true 이다. 만약, false로 변경하면 슬랙 알림에서 왼쪽 바가 빨강색으로 칠해진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">  after_all <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>lane<span class=\"token operator\">|</span>\n    slack<span class=\"token punctuation\">(</span><span class=\"token symbol\">message</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Successfully deployed iOS App\"</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h4>3. error 처리</h4>\n<p>단계 실행 중 에러가 발생하면 exception.message로 어떤 에러인지 Slack을 통해 전송할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">  error <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>lane<span class=\"token punctuation\">,</span> exception<span class=\"token operator\">|</span>\n    slack<span class=\"token punctuation\">(</span>\n      <span class=\"token symbol\">message</span><span class=\"token operator\">:</span> exception<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span>\n      <span class=\"token symbol\">success</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>4. Slack 적용</h4>\n<p>이제 내부 함수들이 실행되기 전 알림을 원하는 자리에 slack 함수를 사용하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">  desc <span class=\"token string-literal\"><span class=\"token string\">\"Push a new beta build to TestFlight\"</span></span>\n  lane <span class=\"token symbol\">:beta</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>options<span class=\"token operator\">|</span>\n    slack<span class=\"token punctuation\">(</span><span class=\"token symbol\">message</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Fastlane start iOS Code Signing\"</span></span><span class=\"token punctuation\">)</span>\n    sync_code_signing<span class=\"token punctuation\">(</span>\n      <span class=\"token symbol\">type</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"appstore\"</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token symbol\">app_identifier</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">'com.friggs.DoctorI'</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token symbol\">readonly</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">)</span>\n\n    slack<span class=\"token punctuation\">(</span><span class=\"token symbol\">message</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Fastlane start iOS Build\"</span></span><span class=\"token punctuation\">)</span>\n    updateVersion<span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span>\n\n    increment_build_number<span class=\"token punctuation\">(</span><span class=\"token symbol\">xcodeproj</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"DoctorIApp.xcodeproj\"</span></span><span class=\"token punctuation\">)</span>\n    build_app<span class=\"token punctuation\">(</span><span class=\"token symbol\">workspace</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"DoctorIApp.xcworkspace\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">scheme</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"DoctorIApp\"</span></span><span class=\"token punctuation\">)</span>\n\n    slack<span class=\"token punctuation\">(</span><span class=\"token symbol\">message</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Fastlane start iOS Release\"</span></span><span class=\"token punctuation\">)</span>\n    upload_to_testflight\n  <span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>5. 전체 코드</h4>\n<p>iOS용 Fastfile 전체 코드이므로 참고하기 바란다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ruby line-numbers\"><code class=\"language-ruby\">default_platform<span class=\"token punctuation\">(</span><span class=\"token symbol\">:ios</span><span class=\"token punctuation\">)</span>\n\nplatform <span class=\"token symbol\">:ios</span> <span class=\"token keyword\">do</span>\n  before_all <span class=\"token keyword\">do</span>\n    <span class=\"token constant\">ENV</span><span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">\"SLACK_URL\"</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"https://hooks.slack.com/services/your/url\"</span></span>\n  <span class=\"token keyword\">end</span>\n\n  after_all <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>lane<span class=\"token operator\">|</span>\n    slack<span class=\"token punctuation\">(</span><span class=\"token symbol\">message</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Successfully deployed iOS App\"</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n\n  error <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>lane<span class=\"token punctuation\">,</span> exception<span class=\"token operator\">|</span>\n    slack<span class=\"token punctuation\">(</span>\n      <span class=\"token symbol\">message</span><span class=\"token operator\">:</span> exception<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">,</span>\n      <span class=\"token symbol\">success</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">updateVersion</span></span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> options<span class=\"token punctuation\">[</span><span class=\"token symbol\">:version</span><span class=\"token punctuation\">]</span>\n      version <span class=\"token operator\">=</span> options<span class=\"token punctuation\">[</span><span class=\"token symbol\">:version</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">else</span>\n      version <span class=\"token operator\">=</span> prompt<span class=\"token punctuation\">(</span><span class=\"token symbol\">text</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Enter the version type or specific version\\n(major, minor, patch or 1.0.0): \"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">end</span>\n\n    re <span class=\"token operator\">=</span> <span class=\"token regex-literal\"><span class=\"token regex\">/\\d+.\\d+.\\d+/</span></span>\n    versionNum <span class=\"token operator\">=</span> version<span class=\"token punctuation\">[</span>re<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>versionNum<span class=\"token punctuation\">)</span>\n      increment_version_number<span class=\"token punctuation\">(</span>\n        <span class=\"token symbol\">version_number</span><span class=\"token operator\">:</span> versionNum\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">elsif</span> <span class=\"token punctuation\">(</span>version <span class=\"token operator\">==</span> <span class=\"token string-literal\"><span class=\"token string\">'major'</span></span> <span class=\"token operator\">||</span> version <span class=\"token operator\">==</span> <span class=\"token string-literal\"><span class=\"token string\">'minor'</span></span> <span class=\"token operator\">||</span> version <span class=\"token operator\">==</span> <span class=\"token string-literal\"><span class=\"token string\">'patch'</span></span><span class=\"token punctuation\">)</span>\n      increment_version_number<span class=\"token punctuation\">(</span>\n        <span class=\"token symbol\">bump_type</span><span class=\"token operator\">:</span> version\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">else</span>\n      <span class=\"token constant\">UI</span><span class=\"token punctuation\">.</span>user_error<span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"[ERROR] Wrong version!!!!!!\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">end</span>\n  <span class=\"token keyword\">end</span>\n\n  desc <span class=\"token string-literal\"><span class=\"token string\">\"Push a new beta build to TestFlight\"</span></span>\n  lane <span class=\"token symbol\">:beta</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>options<span class=\"token operator\">|</span>\n    slack<span class=\"token punctuation\">(</span><span class=\"token symbol\">message</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Fastlane start iOS Code Signing\"</span></span><span class=\"token punctuation\">)</span>\n    sync_code_signing<span class=\"token punctuation\">(</span>\n      <span class=\"token symbol\">type</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"appstore\"</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token symbol\">app_identifier</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">'com.friggs.DoctorI'</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token symbol\">readonly</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">)</span>\n\n    slack<span class=\"token punctuation\">(</span><span class=\"token symbol\">message</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Fastlane start iOS Build\"</span></span><span class=\"token punctuation\">)</span>\n    updateVersion<span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span>\n\n    increment_build_number<span class=\"token punctuation\">(</span><span class=\"token symbol\">xcodeproj</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"DoctorIApp.xcodeproj\"</span></span><span class=\"token punctuation\">)</span>\n    build_app<span class=\"token punctuation\">(</span><span class=\"token symbol\">workspace</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"DoctorIApp.xcworkspace\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">scheme</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"DoctorIApp\"</span></span><span class=\"token punctuation\">)</span>\n\n    slack<span class=\"token punctuation\">(</span><span class=\"token symbol\">message</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Fastlane start iOS Release\"</span></span><span class=\"token punctuation\">)</span>\n    upload_to_testflight\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[참고]</h2>\n<ul>\n<li><a href=\"https://docs.fastlane.tools/actions/slack/\">https://docs.fastlane.tools/actions/slack/</a></li>\n<li><a href=\"https://slack.com/intl/en-kr/help/articles/115005265063-Incoming-webhooks-for-Slack\">https://slack.com/intl/en-kr/help/articles/115005265063-Incoming-webhooks-for-Slack</a></li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-%EC%84%9C%EB%A1%A0\">1. 서론</a></p>\n</li>\n<li>\n<p><a href=\"#2-%EB%B0%A9%EB%B2%95\">2. 방법</a></p>\n<ul>\n<li><a href=\"#2-1-slack-webhook-%EC%84%A4%EC%A0%95\">2-1. Slack Webhook 설정</a></li>\n<li><a href=\"#2-2-fastlane%EC%97%90-%EC%A0%81%EC%9A%A9\">2-2. Fastlane에 적용</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0\">[참고]</a></p>\n</li>\n</ul>","frontmatter":{"author":"millo","category":"reactnative","description":"Fastlane에 Slack을 연동해서 배포 단계에 대한 알림을 설정해보자.","image":{"childImageSharp":{"fixed":{"src":"/static/41ace13b6768be6622e6257e9bb0a52f/497c6/reactnative.png"}}},"lang":"ko","released_at":"2021-08-14 17:35","series":"React Native 배포 자동화","tags":["ReactNative","Fastlane","Slack"],"title":"[React Native] Fastlane Slack 연동","translation":null,"updated_at":null},"fields":{"slug":"/ReactNative-fastlane-slack/"}},"allMarkdownRemark":{"nodes":[{"frontmatter":{"lang":"ko","title":"[React Native] Fastlane을 사용한 배포 자동화"},"fields":{"slug":"/ReactNative-fastlane/"}},{"frontmatter":{"lang":"ko","title":"[React Native] Fastlane match를 사용한 iOS 인증서 동기화"},"fields":{"slug":"/ReactNative-fastlane-match/"}},{"frontmatter":{"lang":"ko","title":"[React Native] Fastlane Slack 연동"},"fields":{"slug":"/ReactNative-fastlane-slack/"}},{"frontmatter":{"lang":"ko","title":"[React Native] 원격 배포를 위한 CI/CD 툴 선택"},"fields":{"slug":"/ReactNative-ci-cd-tool/"}}]}},"pageContext":{"slug":"/ReactNative-fastlane-slack/","series":"React Native 배포 자동화","translation":null,"lang":"ko"}},"staticQueryHashes":["2083168511","3061319093","3557473807","356676075"],"slicesMap":{}}